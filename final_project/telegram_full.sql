-- Данная база данных представляет собой упрощённую модель телеграма
-- TODO: calls, forwards
-- auther: leshark

CREATE DATABASE IF NOT EXISTS telegram;
USE telegram;

DROP TABLE IF EXISTS users;
CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  firstname VARCHAR(100) NULL, 
  lastname VARCHAR(100) NULL,
  username VARCHAR(100) UNIQUE NULL COMMENT 'Users are searched by @username',
  about VARCHAR(66) NULL,
  phone VARCHAR(100) NOT NULL UNIQUE,
  photo_id BIGINT UNSIGNED NULL,
  is_bot BOOLEAN NOT NULL DEFAULT FALSE,
  proxy_settings JSON,
  created_at DATETIME DEFAULT NOW(),
  updated_at DATETIME DEFAULT NOW() ON UPDATE NOW()
);

INSERT INTO `users` VALUES ('1','Rollin','Wunsch','layne83','Quaerat at fuga velit recusandae repellendus quis et. Excepturi li','527-646-5920','5','0',"{}",'1998-08-21 19:54:28','1991-01-07 17:35:49'),
('2','Joyce','Schamberger','okoch','Et officia voluptas quo. Quas sequi omnis ad consequatur. Voluptat','664-950-2760x032','77','0',"{}",'2003-11-17 07:36:16','2007-09-27 16:40:34'),
('3','Jalen','Kub','d\'amore.dexter','Molestiae quos consequuntur ad harum cupiditate fuga. Nemo placeat','225.983.8157','80','0',"{}",'1985-05-16 18:59:10','1977-06-27 15:20:19'),
('4','Luigi','Abbott','isadore.erdman','Optio provident unde voluptas laboriosam. Non quod mollitia fugit ','436.962.0704x3271','98','0',"{}",'1995-02-04 21:15:42','2003-04-12 05:21:12'),
('5','Randal','Simonis','banderson','Possimus non saepe nam libero. Architecto dolores id ut vitae porr','1-628-183-2358','92','0',"{}",'2007-10-13 07:46:46','2017-03-09 06:49:25'),
('6','Eliane','Gorczany','wrodriguez','Voluptas aliquam odit at autem. Voluptas ut voluptatem modi quia a','654.232.4769x94666','46','0',"{}",'1971-11-17 00:28:42','2002-01-19 17:07:59'),
('7','Felix','McClure','clindgren','Error consequatur ut accusantium adipisci. Placeat laboriosam minu','08777927571','36','0',"{}",'1999-08-21 19:22:15','1982-03-02 18:23:31'),
('8','Leopold','Bode','xkoepp','Explicabo qui voluptate consequatur et quo voluptatibus voluptates','(785)159-2962x213','74','0',"{}",'1999-10-21 01:34:36','1995-02-07 12:05:19'),
('9','Kathlyn','Hackett','kgusikowski','Mollitia sapiente et autem ut molestias. Magnam qui qui sint ratio','932.024.1519x48621','71','0',"{}",'2001-08-08 19:45:23','1992-09-20 21:18:55'),
('10','Leda','Grady','osinski.ethyl','Quidem esse soluta nihil sint quis repudiandae omnis impedit. Nequ','041.552.0588','67','0',"{}",'2002-05-20 01:53:39','2012-12-20 20:51:51'),
('11','Vernie','Walker','antonia58','Et vero sint beatae sint quia enim odit. Ab ut distinctio et nemo ','1-837-541-0158x70153','53','0',"{}",'1993-01-26 03:53:15','1974-10-17 04:23:06'),
('12','Isabel','Monahan','xgerlach','Error officia provident libero. Voluptatem veritatis aut debitis m','140-727-4758x68244','78','0',"{}",'1973-08-31 15:14:14','2011-06-04 08:17:47'),
('13','Lela','Sanford','jocelyn.koch','Sed consectetur nostrum at repellendus nam. Ab aut dicta vel possi','1-649-072-2906','95','0',"{}",'2015-11-04 14:39:01','2019-08-07 09:53:56'),
('14','Jayne','Nader','damian49','Consequatur quia dolor veritatis esse. Eos ab cupiditate explicabo','190.959.2511x423','100','0',"{}",'1986-06-12 04:28:16','1984-05-12 23:37:14'),
('15','Easton','Hackett','bromaguera','Et sequi perferendis natus debitis doloremque. Asperiores quam aut','175-276-9178x1116','34','0',"{}",'1992-11-29 05:13:17','1999-12-10 04:41:07'),
('16','Gust','Keebler','hswift','Error recusandae quo rerum similique voluptate. Ut rem deleniti do','+41(4)7793488451','65','0',"{}",'1975-09-15 08:29:26','2017-11-05 15:08:32'),
('17','Alena','Little','corkery.palma','Dolorum iure ducimus provident quasi suscipit aut minima. Modi vol','726.581.9793','67','0',"{}",'2012-04-12 16:37:51','2007-07-10 10:06:45'),
('18','Name','Pacocha','huel.elmira','Est alias est reiciendis harum perferendis necessitatibus aspernat','(397)976-3515x81445','11','0',"{}",'1987-02-25 18:41:52','1983-03-05 00:41:30'),
('19','Patsy','Bosco','noemi.murazik','Aut distinctio deserunt amet aut laboriosam quasi beatae doloribus','1-095-744-2730x82303','30','0',"{}",'2009-05-01 23:55:33','2002-12-05 11:46:58'),
('20','Talia','Trantow','wunsch.dennis','Quis cumque magnam possimus omnis magni. Enim aliquam nihil eum ea','066.999.6744x6125','27','0',"{}",'1997-12-11 13:26:18','1987-03-18 20:11:44'),
('21','Sandrine','Altenwerth','hayes.alverta','Eius et voluptas delectus vel explicabo. Harum et sed officia corp','039-827-6310x43447','61','0',"{}",'1976-12-18 13:44:09','2015-09-12 05:27:10'),
('22','Kayleigh','Bernier','hauck.desiree','Dolor libero eveniet aperiam maxime. Error ut vero amet est iure r','775-197-5149','98','0',"{}",'1979-02-27 22:29:55','2019-07-23 12:44:21'),
('23','Savanna','Heaney','darwin.kilback','Quia et magni laudantium enim ex voluptate at. Ipsam est et quia i','367-119-6427x36854','88','0',"{}",'2006-03-18 01:09:42','2016-11-05 01:25:49'),
('24','Burnice','Kassulke','rempel.arnold','Iste rerum voluptas saepe velit sequi. Asperiores sed repellat ips','788.916.9364x473','46','0',"{}",'1988-03-12 07:46:57','1993-03-29 18:49:25'),
('25','Lorenzo','Turcotte','vivien53','Voluptatem ut sint et sequi amet sit vel. Et quisquam aperiam inci','+92(1)6466604652','56','0',"{}",'1980-10-24 01:57:53','1978-01-29 09:03:42'),
('26','Elias','Murphy','yessenia63','Provident corporis nam numquam sit. Eos praesentium numquam esse e','(152)113-3388','39','1',"{}",'2014-10-11 02:29:45','1978-01-10 19:20:42'),
('27','Audra','Gottlieb','viva80','Similique rerum qui omnis quia quae sequi non. Velit facilis molli','05515138312','92','0',"{}",'1977-12-08 13:32:47','1981-10-21 14:51:14'),
('28','Sean','Huels','isabel57','Sequi consequatur iure sit vero error ad ullam. Velit ad ab perfer','503-666-2336x2619','65','0',"{}",'2000-02-12 10:35:40','1974-08-31 22:24:05'),
('29','Ana','Daugherty','metz.megane','Vitae rerum eius cum inventore deleniti est. Qui ut vitae nihil od','1-019-211-8734','66','0',"{}",'1992-07-21 22:57:56','1983-03-29 14:17:13'),
('30','Adrian','Predovic','ischroeder','Nesciunt voluptas consequatur enim pariatur odit. Non aspernatur a','(438)294-5305x815','4','0',"{}",'2012-10-04 00:30:42','1995-08-08 00:41:18'),
('31','Candice','Halvorson','whansen','Error vel consequatur quod hic dolore autem aperiam. Molestias dic','+19(8)2181964456','22','0',"{}",'1983-09-14 15:26:45','1991-07-02 13:03:47'),
('32','Sid','Ritchie','yroberts','Suscipit sunt quas voluptatum aperiam repudiandae vel ad qui. In f','183.630.5657','37','1',"{}",'2016-05-24 14:25:50','2012-03-01 01:59:59'),
('33','Josefa','Langworth','wwiza','Ipsam ab delectus perspiciatis facere. Atque odio est excepturi no','02267394285','78','0',"{}",'2003-11-11 05:18:28','2008-01-03 20:22:14'),
('34','Layla','Gorczany','danial30','Mollitia commodi distinctio at asperiores laborum. Et tempore qui ','03609727097','61','0',"{}",'1977-01-14 17:15:24','1972-10-22 01:40:05'),
('35','Nicola','Hudson','windler.milton','Exercitationem omnis voluptatem expedita suscipit ut inventore. Vo','039.466.0961','33','0',"{}",'2018-12-26 00:30:20','1981-07-22 21:46:03'),
('36','Ole','Muller','haley.christelle','Est recusandae aliquam qui vitae nam. Tempore quasi rerum vitae in','1-563-813-7712x5026','71','0',"{}",'2009-01-11 15:21:51','1990-12-25 01:37:16'),
('37','Florida','Kunde','junius32','Voluptas commodi laborum officiis nostrum velit ut. Est eos volupt','1-877-052-5626x143','21','0',"{}",'1994-06-18 16:26:47','2010-07-03 16:45:39'),
('38','Wanda','Stoltenberg','bmosciski','Ipsum tempore quia exercitationem nihil similique et. Officia expl','738-593-6192x42430','45','0',"{}",'2017-02-02 19:55:09','1984-01-17 06:17:58'),
('39','Lawrence','Spencer','ffahey','Voluptatibus quae nulla recusandae consequatur omnis rerum vero. A','135-713-0367','7','0',"{}",'2005-07-01 15:45:52','2012-11-17 11:04:20'),
('40','Hillary','Schulist','pink44','Provident non ipsa nobis rerum qui consectetur omnis. Perspiciatis','03814052781','3','0',"{}",'2008-05-30 12:20:01','2000-01-05 18:27:42'),
('41','Adelia','Kub','kd\'amore','Minus beatae soluta quibusdam exercitationem inventore nisi quam c','(990)695-4177','14','0',"{}",'1983-12-08 01:44:17','1976-11-11 06:37:11'),
('42','Precious','Nienow','louie.balistreri','Ad ea sunt velit sequi. Minus a aut sit adipisci. Necessitatibus e','(223)238-2500x418','1','0',"{}",'1976-01-27 06:52:48','1977-03-30 11:07:43'),
('43','Jerrold','Jakubowski','tania.murray','Nihil iusto ut eligendi impedit ab fugiat consequatur. Placeat mol','1-846-385-4174','54','0',"{}",'2015-09-08 16:18:20','2010-09-10 21:20:56'),
('44','Toby','Wiza','brayan.hoeger','Illum quia ipsum unde voluptate error quo et. Et officia deleniti ','1-325-271-3514','38','0',"{}",'1995-10-28 21:43:05','1985-08-25 22:51:33'),
('45','Yazmin','Cruickshank','crooks.benjamin','Voluptas ut enim hic commodi. Temporibus incidunt et beatae optio ','(239)751-6954x1902','44','1',"{}",'1975-09-14 16:20:19','2009-08-20 08:41:32'),
('46','Burley','Hamill','fritsch.howell','Delectus molestiae soluta veritatis illo repudiandae quia. Volupta','+11(2)4414608966','67','1',"{}",'2015-12-02 05:07:13','1971-01-15 15:22:17'),
('47','Lue','O\'Conner','barton.graham','Non aut officiis velit voluptates quis. Provident rem aperiam magn','1-103-985-1636','16','0',"{}",'2003-12-12 20:19:13','1970-01-01 18:06:38'),
('48','Missouri','Upton','thalia.huels','Tenetur ut pariatur sequi voluptatum ut. Maxime molestiae quisquam','989-873-1120','75','0',"{}",'2007-11-19 22:41:29','2014-07-19 08:54:11'),
('49','Manley','Littel','ankunding.marlene','Consequatur sit numquam eos tenetur quo. Voluptas velit id autem f','041.011.4617','89','0',"{}",'2003-05-08 03:02:40','2000-05-11 16:07:49'),
('50','Gerry','Rohan','nat.rogahn','Illo ea repellat animi nobis doloribus. Totam ut sed quo qui accus','(688)705-5366x27085','51','0',"{}",'2005-06-27 06:22:33','1983-05-01 05:15:17'),
('51','Lelia','Schaefer','ekihn','Quis et error quia voluptas. Dolorem accusantium corrupti et.','04290830642','49','0',"{}",'2004-04-10 05:04:12','1979-06-08 17:17:00'),
('52','Merritt','Bogan','hessel.santino','Itaque vitae fugiat doloribus voluptas. Omnis iusto aspernatur mol','1-467-354-1402x7498','63','1',"{}",'2015-03-24 03:48:15','1990-03-06 01:47:59'),
('53','Lafayette','McDermott','gmayer','Aut possimus sint dicta omnis amet in minima. Dolorum vero enim ea','1-571-752-2230x2176','44','0',"{}",'2014-02-04 02:08:34','1998-02-09 12:26:20'),
('54','Mariela','Klein','nico.reinger','Ullam quae facilis praesentium rerum reprehenderit quia unde venia','1-116-860-8794','91','0',"{}",'1997-04-17 02:39:41','1977-10-10 23:00:20'),
('55','Tyra','Bartell','jacques96','Modi ut labore voluptatem laboriosam consectetur. Molestiae enim m','03374119360','87','0',"{}",'1970-07-08 19:57:46','2012-08-24 22:30:49'),
('56','Margret','Mann','lnader','In minima voluptas eum assumenda ut magni suscipit. Amet fuga quis','(121)583-0347','68','1',"{}",'2007-08-21 11:53:59','2007-10-26 06:19:28'),
('57','Pinkie','O\'Conner','abbott.alfreda','Aspernatur consequatur sint distinctio aperiam et officiis eligend','810-639-7758x78964','33','0',"{}",'1979-09-01 23:36:39','1980-02-15 02:47:12'),
('58','Casper','Ritchie','mayert.amelia','Sunt praesentium nihil repellendus laborum eaque tenetur ut. Non i','508.701.2926x24684','53','0',"{}",'1996-06-17 23:16:00','1986-04-17 03:23:49'),
('59','Donnell','Keebler','enrique57','Consequuntur ut qui et omnis reprehenderit consequatur et temporib','949.537.4834x2911','14','0',"{}",'2000-11-05 05:25:46','1973-11-02 21:44:52'),
('60','Freddy','Jones','kraig75','Sit dolorem similique non aut. Omnis soluta numquam ducimus quidem','253-176-4966x3523','96','0',"{}",'1997-12-17 01:40:23','2013-02-15 16:18:20'),
('61','Cory','Frami','eliezer.sporer','Iure odit ut sit voluptatem dolorem similique. Ea dignissimos aliq','(263)787-2885','53','0',"{}",'2006-05-24 21:29:43','1973-09-10 11:28:22'),
('62','Jeanette','Christiansen','rohan.jarret','Voluptate recusandae vel consequatur et id voluptate voluptate. Eo','1-852-815-5399x50706','77','0',"{}",'1978-10-08 05:44:35','1999-05-15 20:14:43'),
('63','Lauretta','Jakubowski','charlie12','Est qui autem sed. Inventore quae recusandae omnis dolores repella','912-934-0468','27','1',"{}",'1984-06-07 08:48:42','1982-06-10 10:43:29'),
('64','Kali','Will','pdenesik','Ut et illum molestias accusantium rerum cum doloremque. Sunt excep','+60(8)2229498796','50','0',"{}",'1991-04-17 04:29:51','2013-04-28 06:53:16'),
('65','Damion','Weissnat','destany76','Et sint placeat enim et explicabo. Architecto ut autem expedita.','(343)232-0834','47','0',"{}",'1979-02-24 02:51:04','2009-03-23 01:38:56'),
('66','Gabriel','Monahan','mkerluke','Veniam ratione repellendus dolorem architecto architecto aliquam u','956-276-0005x934','40','0',"{}",'1980-11-05 21:02:50','1999-05-04 19:45:29'),
('67','Candice','Nolan','norn','Ab neque officiis rem quos cum aut non. Sit vero facere sed ut ips','312.373.4057x97604','13','0',"{}",'1990-04-13 08:16:57','2017-10-09 17:25:41'),
('68','Melisa','Bogisich','adrien44','Est porro consequatur totam nam et. Rerum voluptas sequi numquam h','156-117-0140x251','33','0',"{}",'1980-06-02 02:18:25','2001-12-21 23:20:55'),
('69','Cora','Mills','lemke.brandi','Iure reprehenderit possimus natus molestiae. Rem reiciendis omnis ','875-081-5367','29','0',"{}",'1984-11-30 11:34:09','2011-08-19 17:46:59'),
('70','Nannie','Grimes','amills','Itaque ut rerum quia rerum dolor. Voluptas numquam culpa molestias','1-527-050-7276','34','1',"{}",'1982-12-08 04:33:48','1976-03-20 08:47:52'),
('71','Earnest','Ullrich','brigitte52','Amet magni omnis rerum sunt tenetur fuga. Earum atque ut et nihil ','598.150.1841','68','0',"{}",'2003-11-20 23:45:58','1982-08-11 09:40:14'),
('72','Jimmie','Hickle','funk.america','Non omnis rem et illo sunt quia ea beatae. Odio a mollitia commodi','(429)750-3919x37209','94','0',"{}",'1989-09-03 09:22:15','1985-09-01 17:38:35'),
('73','Frederic','Weimann','fkassulke','Ipsam quia provident fugit accusamus et. Fugiat ut voluptatum alia','180.485.7858x5618','1','0',"{}",'2009-11-30 16:55:33','1992-01-02 15:57:00'),
('74','Casimir','Kutch','tevin.murazik','Eligendi fuga possimus at ut ut. Eaque debitis alias et nostrum qu','394.155.2702x661','51','0',"{}",'1996-05-21 02:25:09','1974-06-07 00:01:24'),
('75','Marge','Price','orville.leffler','Maiores velit aut deleniti saepe. Ducimus unde ipsum reprehenderit','920-021-3328x11544','28','0',"{}",'2016-04-27 22:31:27','1994-10-13 20:47:55'),
('76','Susanna','Bruen','destiney.beer','Ad odio saepe laudantium non optio provident doloremque. Corrupti ','1-506-738-1522x71323','73','0',"{}",'1983-04-08 22:30:44','1982-05-30 21:23:53'),
('77','Jaquan','Kuphal','thaag','Rerum aliquam molestiae nulla est quibusdam laboriosam. Ab eius co','515-920-7955x14454','53','0',"{}",'1971-11-28 13:31:58','2008-12-07 11:41:00'),
('78','Reanna','Oberbrunner','doyle.mckayla','Veniam laboriosam quia repudiandae sequi amet aspernatur temporibu','1-069-040-9363x833','92','0',"{}",'2011-06-24 17:02:11','1989-12-04 00:30:32'),
('79','Florence','Cartwright','faufderhar','Voluptates mollitia nesciunt aliquam qui iure quod. Vel voluptates','(362)656-3995','5','0',"{}",'1990-06-13 02:54:53','1984-07-15 23:11:50'),
('80','Jade','Kris','maverick17','Occaecati sunt minus minus et dolores sit ea. Tenetur et placeat p','609-524-3383x96290','70','1',"{}",'1988-07-18 10:15:03','1976-06-02 18:07:00'),
('81','Wilford','Stamm','damion.howell','Non consequuntur quis enim ullam sed esse. Adipisci doloribus et t','1-941-559-1016','93','0',"{}",'2012-01-04 08:40:42','1996-10-01 04:53:57'),
('82','Marcellus','Kuvalis','garnett92','Ipsa asperiores sunt quasi qui. Velit cumque quisquam voluptatum c','(319)226-2807','92','0',"{}",'1977-02-06 14:32:01','2013-04-05 05:47:53'),
('83','Roger','Altenwerth','richie.leannon','Aliquid expedita fuga sed consequuntur minus. Voluptatibus digniss','1-745-528-3263x725','25','0',"{}",'1988-08-16 15:22:09','1980-07-23 12:47:05'),
('84','Dejah','Fay','alvera.vandervort','Sed ut nisi quibusdam. Ipsam impedit quisquam beatae nihil quia do','02526800173','95','0',"{}",'1982-08-05 05:16:18','2000-12-26 09:23:39'),
('85','Adrianna','Huels','greta35','Quia nostrum est tenetur. Est est sint inventore debitis id eaque ','976.970.2752','11','0',"{}",'2018-04-25 01:20:32','2006-12-08 06:55:42'),
('86','Kaleigh','Welch','amiller','Dolores dolores expedita quos et tenetur voluptatum odio. Tempore ','(055)687-7542x2601','53','0',"{}",'1998-05-27 08:01:14','1997-12-17 04:30:53'),
('87','Isac','Mertz','murray.chandler','Autem quod ad non est. Nihil aut molestiae unde dolorem distinctio','(244)550-1980','74','0',"{}",'2005-06-12 17:57:20','2008-05-04 10:17:31'),
('88','Chelsie','Langworth','nelle.schuster','Et nemo enim dolorum deleniti est. Ut voluptates autem quo quis ma','862.028.8669','69','0',"{}",'1992-12-12 05:05:09','2010-05-13 04:53:37'),
('89','Chauncey','Ullrich','paris.cassin','Ratione et facere rerum provident sunt. Odit corrupti et dicta opt','899.131.7494','80','0',"{}",'1991-01-27 03:36:07','2011-09-26 00:16:09'),
('90','Elda','Waelchi','qsipes','Sed voluptas rem nesciunt eum veniam. Natus cum suscipit quia mole','+72(8)2651688779','56','0',"{}",'2009-07-14 16:04:32','2018-12-20 22:29:08'),
('91','Kristin','Collins','amina.schroeder','Sint sit id autem ratione aut. Voluptatum in quis vel velit unde c','1-069-916-9923','37','0',"{}",'2012-05-18 23:44:29','2004-03-23 07:23:48'),
('92','Milan','Reynolds','stiedemann.kristian','Et porro consequuntur debitis blanditiis et. Voluptatibus veritati','1-385-484-4081x36743','46','0',"{}",'1975-07-14 09:37:24','1990-11-19 00:46:49'),
('93','Nigel','Lehner','thane','Ab rerum porro quia laboriosam beatae. Ut molestiae alias omnis.','1-130-963-6189','90','1',"{}",'1980-06-11 20:49:12','2018-04-11 18:21:51'),
('94','Albina','Ward','bartholome.bauch','Voluptate sed in itaque consectetur. Iure sit eos at totam accusam','254.516.4288x98228','70','0',"{}",'1979-10-19 05:31:30','2016-06-09 04:15:08'),
('95','Federico','Bernhard','wmcglynn','Porro fuga est officiis quasi sed et. Quos doloremque quo error sa','183.533.8843x1145','1','0',"{}",'1994-03-22 14:47:53','1999-01-19 19:10:35'),
('96','Xander','Friesen','hudson.khalil','Dolores voluptatem nemo consequuntur. Quia nesciunt dolor eveniet ','09402692212','91','1',"{}",'2005-03-31 01:38:46','1996-01-02 00:17:27'),
('97','Polly','Keeling','bo\'keefe','Reprehenderit natus rem accusantium commodi voluptatem. Accusamus ','(226)819-4994x19838','69','0',"{}",'1970-10-02 11:14:26','2003-06-20 18:30:11'),
('98','Corine','Bechtelar','mitchell.caitlyn','Qui repellendus repellat sunt et error fugiat mollitia. Quae et es','498-768-4198x6988','100','0',"{}",'1998-08-02 17:59:21','2013-08-25 03:35:03'),
('99','Zoey','Stracke','lshanahan','In sit quos molestiae sunt distinctio est. Quas et eum esse conseq','791-377-2585x01799','15','0',"{}",'2004-12-06 21:25:20','1972-03-22 12:29:16'),
('100','Xzavier','Jacobi','ellsworth63','Quia recusandae est voluptatem nobis similique veritatis est. Elig','549-105-5764','46','0',"{}",'2008-06-26 08:08:24','1990-04-25 15:52:45'); 

-- connection between media content and its types
DROP TABLE IF EXISTS media_types;
CREATE TABLE media_types (
  id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
  type VARCHAR(255) NOT NULL UNIQUE
);

INSERT INTO media_types VALUES
  (1,"contact"),
  (2,"document"),
  (3,"game"),
  (4,"geo_live"),
  (5,"geo_point"),
  (6,"gif"),
  (7,"photo"),
  (8,"poll");

DROP TABLE IF EXISTS media;
CREATE TABLE media (
  id SERIAL PRIMARY KEY,
  name TEXT NULL,
  size INT UNSIGNED,
  user_id BIGINT UNSIGNED NOT NULL,
  CONSTRAINT media_user_id_fk FOREIGN KEY (user_id) REFERENCES users(id),
  media_type_id INT UNSIGNED NOT NULL,
  CONSTRAINT media_type_id_fk FOREIGN KEY (media_type_id) REFERENCES media_types(id)
    ON DELETE RESTRICT,
  metadata JSON,
  created_at DATETIME DEFAULT NOW(),
  updated_at DATETIME DEFAULT NOW() ON UPDATE NOW()
);

INSERT INTO `media` VALUES ('1','porro','2723','77','7',"{}",'1981-11-28 00:59:57','1983-08-28 13:37:15'),
('2','veniam','1907','52','4',"{}",'1989-06-29 04:26:24','1992-01-12 12:31:19'),
('3','est','2069','70','6',"{}",'2010-12-09 09:18:52','1995-07-28 20:38:28'),
('4','possimus','351','74','5',"{}",'1973-05-16 22:28:09','1999-11-22 22:40:01'),
('5','ea','2442','36','2',"{}",'2018-12-01 21:50:51','2014-08-04 06:08:42'),
('6','et','2638','17','7',"{}",'2012-09-15 11:20:07','1986-06-10 12:49:32'),
('7','quod','1916','46','8',"{}",'2010-03-15 16:58:26','2003-02-03 06:05:16'),
('8','officia','755','26','3',"{}",'1971-10-19 08:26:31','1992-03-20 09:42:11'),
('9','corporis','1889','64','5',"{}",'2000-11-09 21:08:02','2019-04-24 02:21:18'),
('10','consequatur','2202','18','7',"{}",'1986-02-18 07:02:49','1988-05-20 15:14:47'),
('11','aut','706','69','3',"{}",'1993-03-31 14:42:27','1982-01-14 08:56:57'),
('12','ab','947','94','6',"{}",'2013-05-30 19:09:14','1972-12-25 07:09:54'),
('13','cumque','746','65','7',"{}",'2006-04-24 13:09:03','1980-10-29 11:31:07'),
('14','quisquam','2211','6','4',"{}",'2011-12-08 10:36:36','1989-09-29 09:32:25'),
('15','error','1743','67','6',"{}",'2007-03-24 18:19:52','1993-06-26 08:36:27'),
('16','dolorum','2957','70','4',"{}",'1997-04-04 12:25:06','1993-10-23 04:25:47'),
('17','itaque','198','46','4',"{}",'1972-03-26 13:45:56','2011-11-19 20:06:58'),
('18','dolores','5','100','3',"{}",'1997-02-06 10:12:15','1988-11-19 02:14:47'),
('19','velit','566','94','4',"{}",'2006-10-14 03:48:22','2011-02-19 22:13:19'),
('20','ea','2133','19','5',"{}",'2007-01-07 22:23:32','1998-04-16 11:41:36'),
('21','saepe','1587','60','7',"{}",'2013-06-30 15:08:06','2006-03-24 04:13:18'),
('22','voluptas','1870','14','6',"{}",'1995-04-22 04:48:13','1992-07-31 04:38:48'),
('23','dolorem','2350','85','5',"{}",'2011-09-13 12:07:43','1981-12-28 23:13:11'),
('24','inventore','2755','61','7',"{}",'1983-02-24 00:26:54','2008-06-09 15:26:54'),
('25','ea','2063','53','3',"{}",'1990-03-04 23:54:13','1978-08-20 01:19:16'),
('26','est','389','69','3',"{}",'1980-12-29 15:51:35','2016-10-31 10:16:12'),
('27','magni','223','65','5',"{}",'1989-06-11 10:20:14','1979-01-22 05:05:45'),
('28','iure','486','62','5',"{}",'2014-05-01 02:30:52','2019-05-12 19:16:48'),
('29','aliquid','1768','89','4',"{}",'1995-03-04 03:20:42','2015-10-16 15:52:07'),
('30','suscipit','2967','14','2',"{}",'1984-07-07 09:43:12','1970-07-13 15:16:45'),
('31','vitae','537','56','8',"{}",'1978-10-02 11:04:23','1999-10-23 02:51:38'),
('32','neque','2728','54','2',"{}",'1972-02-26 14:58:30','2011-02-08 20:39:11'),
('33','cumque','107','2','4',"{}",'1979-03-10 05:52:03','2000-08-08 00:59:58'),
('34','id','1802','37','7',"{}",'1986-02-08 10:49:04','1983-03-17 02:00:29'),
('35','ipsam','545','32','4',"{}",'1995-10-06 15:03:16','2017-12-10 00:57:43'),
('36','nisi','115','44','1',"{}",'1982-09-25 02:44:52','2010-08-11 07:01:52'),
('37','molestiae','1260','56','3',"{}",'1973-10-25 09:25:21','1970-06-24 12:49:13'),
('38','repellat','2132','61','1',"{}",'1975-11-21 18:18:34','1987-01-09 07:44:55'),
('39','et','1975','41','7',"{}",'2009-08-08 10:08:55','2017-12-19 02:51:47'),
('40','consequatur','792','31','8',"{}",'2000-06-05 14:58:01','2013-04-13 12:41:29'),
('41','architecto','60','76','1',"{}",'1975-04-19 09:29:55','1971-04-17 19:24:24'),
('42','totam','1824','78','6',"{}",'1985-08-04 08:16:26','1999-12-16 06:52:41'),
('43','cumque','2125','47','4',"{}",'2003-06-25 14:01:26','2002-05-23 15:09:29'),
('44','provident','1087','72','8',"{}",'1970-10-05 11:00:56','1971-04-10 14:10:53'),
('45','consequatur','2066','41','5',"{}",'1998-08-16 18:25:10','1989-11-28 11:16:31'),
('46','exercitationem','1640','84','6',"{}",'2019-07-03 07:33:10','2009-08-28 22:03:58'),
('47','nihil','2937','8','1',"{}",'1987-03-06 09:53:54','2000-02-27 10:22:04'),
('48','rerum','1543','5','6',"{}",'1995-04-25 23:17:42','1989-11-23 16:15:30'),
('49','iusto','761','46','3',"{}",'2014-07-20 02:15:29','2014-04-17 00:32:17'),
('50','corporis','1784','82','7',"{}",'2016-04-02 17:51:04','2010-10-24 17:21:22'),
('51','et','1144','36','6',"{}",'1992-11-19 02:19:59','2006-09-17 00:42:41'),
('52','aut','242','31','4',"{}",'1978-04-09 08:01:20','1999-02-13 03:35:19'),
('53','nostrum','638','41','8',"{}",'2010-07-28 03:25:18','1995-01-11 09:54:18'),
('54','maxime','2001','50','1',"{}",'2010-08-05 05:24:45','1995-03-02 22:00:49'),
('55','placeat','2220','1','2',"{}",'2004-12-18 16:52:35','2009-11-11 02:03:32'),
('56','quibusdam','1369','88','4',"{}",'2000-01-27 15:22:49','2016-01-05 20:41:24'),
('57','non','1646','26','3',"{}",'1975-02-23 00:40:21','1997-09-05 06:29:51'),
('58','tempore','2928','10','8',"{}",'1999-07-16 20:54:10','1972-05-21 08:38:32'),
('59','ea','1640','65','5',"{}",'2007-01-15 01:24:04','1984-03-28 02:16:33'),
('60','aspernatur','2959','46','8',"{}",'2009-08-16 15:37:00','2000-05-17 12:11:31'),
('61','numquam','2235','82','5',"{}",'1971-11-28 18:03:00','2014-11-09 01:49:50'),
('62','excepturi','215','82','5',"{}",'2017-08-28 19:20:19','1970-08-09 08:27:59'),
('63','non','2248','77','1',"{}",'1975-07-10 20:29:00','2003-10-06 14:50:02'),
('64','quo','1429','75','8',"{}",'1979-12-31 14:58:59','2013-12-28 11:56:42'),
('65','in','2219','27','5',"{}",'1972-02-09 10:02:41','1988-12-13 04:13:16'),
('66','non','1696','17','4',"{}",'2000-07-04 06:55:43','2002-10-14 03:31:25'),
('67','aut','1403','11','5',"{}",'2011-07-21 03:41:21','2018-05-14 22:17:38'),
('68','voluptatem','2097','98','6',"{}",'2009-10-29 13:38:18','1990-06-02 18:07:55'),
('69','earum','712','80','2',"{}",'1995-11-19 03:17:00','1984-04-30 02:35:56'),
('70','harum','1258','42','8',"{}",'2015-03-18 15:43:08','1990-12-11 06:55:40'),
('71','eum','1024','92','6',"{}",'2005-10-20 12:38:39','1974-02-20 06:45:52'),
('72','iste','205','57','6',"{}",'2014-04-03 22:30:55','2017-10-23 02:10:46'),
('73','quod','1262','97','2',"{}",'2000-10-24 17:56:15','1973-01-22 19:35:12'),
('74','amet','2583','18','5',"{}",'1991-12-04 18:33:52','2005-09-26 12:47:19'),
('75','facilis','1615','92','4',"{}",'1995-01-14 19:45:53','2012-10-20 00:02:56'),
('76','quidem','354','22','5',"{}",'1980-10-04 09:32:47','1979-08-07 02:01:37'),
('77','voluptas','2060','56','1',"{}",'2010-04-21 05:45:07','1983-01-08 05:34:31'),
('78','nostrum','1461','10','3',"{}",'1983-07-29 00:03:34','2014-12-20 02:12:52'),
('79','quis','2631','31','6',"{}",'2009-07-22 03:29:27','2002-11-14 22:06:39'),
('80','quia','2944','71','8',"{}",'1987-02-01 04:09:52','2009-10-04 08:38:15'),
('81','necessitatibus','615','6','4',"{}",'1976-04-12 20:24:02','1975-11-09 04:22:12'),
('82','et','628','88','6',"{}",'2004-12-03 06:28:25','1995-10-04 18:07:44'),
('83','sunt','559','47','7',"{}",'2002-04-19 16:06:09','2009-04-18 01:35:36'),
('84','sint','2781','28','2',"{}",'1997-07-18 23:55:56','1988-08-07 20:24:34'),
('85','occaecati','607','41','4',"{}",'2007-04-08 03:15:51','1988-07-03 04:20:03'),
('86','rerum','2009','30','3',"{}",'1984-10-06 11:01:32','2012-09-21 08:06:27'),
('87','velit','1047','40','7',"{}",'1987-10-09 13:03:23','2011-08-26 16:10:54'),
('88','nisi','2602','87','1',"{}",'1992-02-16 21:57:09','1994-11-30 21:31:01'),
('89','minima','2333','41','1',"{}",'1997-12-19 23:11:19','1971-11-06 04:25:12'),
('90','nemo','1222','100','3',"{}",'1980-04-17 10:12:31','1999-06-03 12:10:40'),
('91','tenetur','1401','19','4',"{}",'1990-04-15 08:39:01','1988-11-10 13:39:59'),
('92','et','1854','85','1',"{}",'1989-07-06 10:16:39','1982-02-19 19:13:45'),
('93','minus','2365','3','5',"{}",'1984-03-30 18:58:22','1988-04-01 01:46:11'),
('94','fugit','2098','11','7',"{}",'1972-04-18 22:24:31','2012-12-21 21:39:06'),
('95','est','2831','99','5',"{}",'1980-11-19 04:51:18','1992-07-16 08:59:43'),
('96','quod','1023','47','5',"{}",'2015-07-29 21:29:08','2007-06-18 07:35:37'),
('97','eveniet','1274','84','6',"{}",'2019-01-13 08:19:47','2012-09-16 19:52:03'),
('98','et','2963','4','1',"{}",'2015-01-17 10:53:17','2014-04-09 04:37:56'),
('99','voluptas','990','15','8',"{}",'2004-04-23 21:28:28','2004-07-23 19:39:20'),
('100','libero','2411','63','5',"{}",'1977-05-14 11:31:13','1993-05-29 00:34:53'); 

ALTER TABLE users ADD 
  CONSTRAINT users_photo_id_fk FOREIGN KEY (photo_id) REFERENCES media(id)
    ON DELETE SET NULL;

DROP TABLE IF EXISTS channels;
CREATE TABLE channels(
  id BIGINT NOT NULL AUTO_INCREMENT PRIMARY KEY,
  title VARCHAR(255) NOT NULL,
  link VARCHAR(100) UNIQUE NULL COMMENT 'Link is auto-generated for private channels',
  is_public BOOLEAN NOT NULL DEFAULT FALSE,
  about VARCHAR(255) NULL,
  photo_id BIGINT UNSIGNED NULL,
  CONSTRAINT channels_photo_id_fk FOREIGN KEY (photo_id) REFERENCES media(id)
    ON DELETE SET NULL,
  created_at DATETIME DEFAULT NOW(),
  updated_at DATETIME DEFAULT NOW() ON UPDATE NOW()
);

DELIMITER //

DROP FUNCTION IF EXISTS gen_link//
CREATE FUNCTION gen_link() RETURNS TEXT NO SQL
BEGIN
  RETURN CONCAT("https://t.me/joinchat/", LEFT(UUID(), 22));
END //

-- auto generate link for channels
DROP TRIGGER IF EXISTS before_insert_channels//
CREATE TRIGGER before_insert_channels BEFORE INSERT ON channels FOR EACH ROW
BEGIN
  IF NEW.link IS NULL
    THEN SET NEW.link = gen_link();
  END IF;
END //

DELIMITER ;

INSERT INTO `channels` VALUES ('1','Rerum aspernatur inventore aliquid.','doloremque','1','','12','2006-12-13 18:21:22','1989-08-11 14:13:49'),
('2','Dolor voluptatum sit ut sed.',NULL,'1','','15','2002-09-15 03:24:23','1976-04-20 18:52:05'),
('3','Molestias ex doloremque maxime nihil.',NULL,'0','','81','2011-12-10 08:14:48','1994-11-14 23:14:19'),
('4','Explicabo quae ut facilis culpa.','aut','1','',NULL,'1976-03-25 22:54:28','1970-06-19 14:57:27'),
('5','Iusto rerum quam omnis.','et','1','','70','1985-02-24 19:46:10','1983-02-11 08:36:50'),
('6','Libero autem atque perspiciatis.','suscipit','1','','92','1976-05-21 14:17:29','1988-04-17 16:12:11'),
('7','Libero aut commodi dolor minus saepe.','quae','0','',NULL,'2004-02-07 13:56:40','1974-09-03 12:02:21'),
('8','Libero a quo quam.','cumque','1','Sequi et quaerat quo architecto. Ullam vel libero aliquid excepturi. Deleniti distinctio quaerat vel. Debitis commodi laboriosam non.',NULL,'1990-12-20 00:41:37','1992-12-30 19:18:56'),
('9','Quasi modi et.','enim','1','Fugit omnis officia dolor repellendus. Dolor eaque molestiae qui quae adipisci facere maiores. Officia necessitatibus harum doloremque.','59','2007-02-17 02:31:26','1994-04-08 10:00:58'),
('10','In asperiores temporibus non similique.','dolor','0','Sunt distinctio vitae ipsa totam quia cumque. Molestiae repellendus incidunt ea. Quisquam temporibus aut ducimus non ea dignissimos et.','74','1980-10-17 17:27:04','2000-04-10 14:34:51');

-- table of user roles in communities
DROP TABLE IF EXISTS user_roles;
CREATE TABLE user_roles (
  id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,
  user_role VARCHAR(30) NOT NULL COMMENT 'admin, creator or participant'
);

INSERT INTO user_roles VALUES
  (1,"participant"),
  (2,"admin"),
  (3,"creator");

-- connection between users and channels
DROP TABLE IF EXISTS channels_users;
CREATE TABLE channels_users (
  channel_id BIGINT NOT NULL COMMENT 'is < 0',
  user_id BIGINT UNSIGNED NOT NULL,
  user_role INT UNSIGNED NOT NULL,
  user_permissions SET('no_rights', 'change_chanel_info', 'post_messages', 'edit_messages_of_others', 'delete_messages_of_others', 'add_subscribers', 'add_new_admins'),
  CONSTRAINT channels_users_channel_id_fk FOREIGN KEY (channel_id) REFERENCES channels(id)
    ON DELETE CASCADE,
  CONSTRAINT channels_users_user_id_fk FOREIGN KEY (user_id) REFERENCES users(id)
    ON DELETE CASCADE,
  CONSTRAINT channels_users_user_role_fk FOREIGN KEY (user_role) REFERENCES user_roles(id)
    ON DELETE RESTRICT,
  PRIMARY KEY (channel_id, user_id)
);

INSERT INTO `channels_users` VALUES 
('1','18','1','no_rights'),
('1','21','3','change_chanel_info,post_messages,edit_messages_of_others,delete_messages_of_others,add_subscribers,add_new_admins'),
('1','25','1','no_rights'),
('1','29','1','no_rights'),
('1','51','1','no_rights'),
('1','52','2','change_chanel_info,post_messages,edit_messages_of_others,delete_messages_of_others'),
('1','58','2','change_chanel_info,post_messages'),
('1','63','1','no_rights'),
('1','65','1','no_rights'),
('1','70','1','no_rights'),
('1','73','2','change_chanel_info,post_messages,edit_messages_of_others,delete_messages_of_others'),
('1','84','1','no_rights'),
('1','89','1','no_rights'),
('1','90','1','no_rights'),
('1','97','1','no_rights'),
('2','2','3','change_chanel_info,post_messages,edit_messages_of_others,delete_messages_of_others,add_subscribers,add_new_admins'),
('2','4','1','no_rights'),
('2','11','1','no_rights'),
('2','19','1','no_rights'),
('2','21','1','no_rights'),
('2','22','2','change_chanel_info'),
('2','26','2','change_chanel_info,post_messages,edit_messages_of_others,delete_messages_of_others'),
('2','31','1','no_rights'),
('2','36','1','no_rights'),
('2','38','1','no_rights'),
('2','43','1','no_rights'),
('2','61','1','no_rights'),
('2','68','1','no_rights'),
('2','81','1','no_rights'),
('2','86','1','no_rights'),
('2','89','1','no_rights'),
('2','97','1','no_rights'),
('3','10','1','no_rights'),
('3','11','2','change_chanel_info,post_messages,edit_messages_of_others,delete_messages_of_others,add_subscribers'),
('3','19','1','no_rights'),
('3','25','1','no_rights'),
('3','34','2','change_chanel_info,post_messages'),
('3','59','3','change_chanel_info,post_messages,edit_messages_of_others,delete_messages_of_others,add_subscribers,add_new_admins'),
('3','60','1','no_rights'),
('3','64','1','no_rights'),
('3','70','1','no_rights'),
('3','81','1','no_rights'),
('3','83','1','no_rights'),
('3','88','1','no_rights'),
('3','92','1','no_rights'),
('3','99','1','no_rights'),
('3','100','1','no_rights'),
('4','4','2','change_chanel_info,post_messages'),
('4','5','2','change_chanel_info,post_messages'),
('4','8','2','change_chanel_info,post_messages'),
('4','16','3','change_chanel_info,post_messages,edit_messages_of_others,delete_messages_of_others,add_subscribers,add_new_admins'),
('4','17','1','no_rights'),
('4','20','1','no_rights'),
('4','22','1','no_rights'),
('4','23','1','no_rights'),
('4','26','1','no_rights'),
('4','37','1','no_rights'),
('4','44','1','no_rights'),
('4','46','1','no_rights'),
('4','48','1','no_rights'),
('4','50','1','no_rights'),
('4','57','1','no_rights'),
('4','59','1','no_rights'),
('4','60','1','no_rights'),
('4','67','1','no_rights'),
('4','83','1','no_rights'),
('4','92','1','no_rights'),
('4','100','1','no_rights'),
('5','2','1','no_rights'),
('5','7','3','change_chanel_info,post_messages,edit_messages_of_others,delete_messages_of_others,add_subscribers,add_new_admins'),
('5','9','1','no_rights'),
('5','16','1','no_rights'),
('5','18','1','no_rights'),
('5','27','2','change_chanel_info,post_messages'),
('5','39','2','change_chanel_info,post_messages'),
('5','43','1','no_rights'),
('5','45','1','no_rights'),
('5','56','2','change_chanel_info,post_messages'),
('5','59','1','no_rights'),
('5','61','2','change_chanel_info,post_messages'),
('5','70','1','no_rights'),
('5','72','1','no_rights'),
('10','74','3','change_chanel_info,post_messages,edit_messages_of_others,delete_messages_of_others,add_subscribers,add_new_admins'),
('10','77','1','no_rights'),
('10','78','1','no_rights'),
('10','83','1','no_rights'),
('5','92','1','no_rights'),
('6','93','3','change_chanel_info,post_messages,edit_messages_of_others,delete_messages_of_others,add_subscribers,add_new_admins'),
('7','94','3','change_chanel_info,post_messages,edit_messages_of_others,delete_messages_of_others,add_subscribers,add_new_admins'),
('7','96','1','no_rights'),
('7','25','1','no_rights'),
('7','19','1','no_rights'),
('8','48','3','change_chanel_info,post_messages,edit_messages_of_others,delete_messages_of_others,add_subscribers,add_new_admins'),
('8','73','1','no_rights'),
('8','71','1','no_rights'),
('8','25','1','no_rights'),
('8','1','1','no_rights'),
('8','46','1','no_rights'),
('9','75','3','change_chanel_info,post_messages,edit_messages_of_others,delete_messages_of_others,add_subscribers,add_new_admins'),
('9','73','1','no_rights'),
('7','97','2','change_chanel_info,post_messages,edit_messages_of_others,delete_messages_of_others,add_subscribers'); 


DROP TABLE IF EXISTS chats;
CREATE TABLE chats(
  id SERIAL PRIMARY KEY,
  title VARCHAR(200) NULL COMMENT 'title in chat is CONCAT(firstname, lastname) of user',
  photo_id BIGINT UNSIGNED NULL COMMENT 'photo in chat is user photo',
  CONSTRAINT chats_photo_id_fk FOREIGN KEY (photo_id) REFERENCES media(id)
    ON DELETE SET NULL,
  created_at DATETIME DEFAULT NOW(),
  updated_at DATETIME DEFAULT NOW() ON UPDATE NOW()
);

INSERT INTO `chats` VALUES 
('1','Ut sunt ut.','3','2010-07-16 20:51:20','1976-07-25 17:42:58'),
('2','Non aspernatur.','42','1977-11-25 13:08:51','1997-07-27 20:23:13'),
('3','Veritatis sint.','61','2004-03-09 19:22:51','1995-03-02 01:34:50'),
('4','Quis repudiandae incidunt.','78','2016-10-10 02:49:37','1975-09-22 23:29:58'),
('5','Explicabo sequi suscipit.','36','1978-01-28 08:09:41','1995-02-05 00:39:39'),
('6','Incidunt qui.','1','1994-08-24 01:23:55','1975-07-04 16:58:23'),
('7','Qui quam.','82','1974-03-25 15:23:42','2004-12-05 19:00:03'),
('8','Occaecati officia.','97','1992-02-05 23:09:41','2010-07-11 08:56:30'),
('9','Repellendus aspernatur.','28','1970-02-07 05:23:40','1979-09-04 11:30:39'),
('10','Voluptates quia.','3','1997-11-30 00:50:46','1980-02-07 21:18:18'),
('11','Quo laboriosam.','69','2008-01-05 08:40:02','1986-02-27 21:30:56'),
('12','A facere.','35','2014-05-13 03:20:38','2005-03-30 22:15:00'),
('13','Quia totam.','53','1974-01-18 00:19:37','2003-12-10 07:35:36'),
('14','Qui quaerat explicabo.','97','1975-06-20 07:43:01','1994-07-23 18:04:03'),
('15','Quasi vero dolorum.','59','1999-05-11 09:32:02','1976-09-20 19:38:22'),
('16','Alias aperiam quia.','15','1995-03-22 14:37:12','2011-06-03 18:14:06'),
('17','Laboriosam accusantium.','28','1971-06-11 02:35:04','2000-02-10 14:03:26'),
('18','Voluptatem fugit perferendis.','70','1979-12-29 01:12:54','1998-05-13 21:34:42'),
('19','Veritatis ipsam et.','60','1985-09-01 03:17:18','1992-08-21 02:54:13'),
('20','Quibusdam qui doloremque.','32','1979-08-04 03:26:25','2012-03-14 09:11:00'),
('21','Reiciendis vero itaque.','39','1974-04-23 11:46:40','2016-02-04 23:07:20'),
('22','Ut occaecati.','14','2005-11-14 10:58:01','2006-02-18 03:44:49'),
('23','Sapiente eos quia.','50','2012-07-22 13:04:23','1993-03-13 13:37:32'),
('24','Sed dolor eum.','27','2010-03-16 19:21:10','2016-12-25 04:32:05'),
('25','Labore esse doloremque.','65','1977-01-31 22:30:24','1993-04-22 04:50:05'),
('26','Iure voluptas.','63','1994-12-21 03:48:13','1971-10-13 17:49:17'),
('27','Recusandae aut vero.','79','2012-04-04 22:09:19','2009-11-14 01:56:05'),
('28','Aliquam voluptatem.','93','1970-07-21 18:16:33','2017-04-21 02:41:50'),
('29','Deleniti et.','10','2007-09-12 16:06:42','1983-05-06 06:58:22'),
('30','Aliquam nihil.','43','2013-03-29 18:20:06','1980-09-06 12:56:24'),
('31','Perferendis error omnis.','49','1989-07-22 12:06:05','2010-02-18 20:57:07'),
('32','Repellendus nemo perferendis.','76','1973-10-25 04:24:07','1995-08-15 19:01:51'),
('33','Delectus qui nulla.','16','2012-03-19 14:26:47','2012-08-17 02:01:23'),
('34','Omnis possimus.','6','2001-09-16 00:22:50','2007-10-15 08:39:10'),
('35','Unde ex.','13','2014-04-24 22:26:13','1983-06-16 18:33:51'),
('36','Impedit aperiam.','35','1982-11-22 09:43:13','2000-11-17 02:25:51'),
('37','Voluptatem reprehenderit.','95','1997-08-16 12:28:20','1970-07-23 01:58:24'),
('38','Debitis ut.','72','2015-06-10 08:51:19','1989-01-29 23:07:56'),
('39','Porro repellat.','16','2006-11-12 10:28:51','1977-02-15 17:27:56'),
('40','Ut inventore.','39','1998-03-01 03:25:18','1996-01-18 06:34:24'),
('41','Sunt sunt.','6','1976-04-27 07:51:22','1988-03-26 21:34:07'),
('42','Consectetur et earum.','45','1981-11-09 06:17:32','1975-09-22 19:34:49'),
('43','Quia aut.','31','1971-02-18 05:55:13','1997-02-23 08:23:52'),
('44','Exercitationem aperiam.','94','2009-11-11 19:52:33','2011-02-14 15:57:06'),
('45','Laborum et laboriosam.','47','1996-08-19 11:58:15','1990-05-18 23:11:51'),
('46','Odit numquam repellendus.','78','1998-09-12 04:48:08','1975-06-28 01:56:06'),
('47','Impedit rem culpa.','93','1986-01-24 13:05:19','1972-05-21 11:37:02'),
('48','Ad nam blanditiis.','82','2009-10-04 06:04:34','1979-06-29 02:44:32'),
('49','Similique dolorem.','39','1976-06-26 17:08:24','1974-07-10 09:28:21'),
('50','Amet quaerat.','63','2015-06-14 12:38:17','2017-08-18 22:00:11');


-- connection between users and chats
DROP TABLE IF EXISTS chats_users;
CREATE TABLE chats_users (
  chat_id BIGINT UNSIGNED NOT NULL,
  from_user_id BIGINT UNSIGNED NOT NULL,
  to_user_id BIGINT UNSIGNED NOT NULL,
  CONSTRAINT chats_users_chat_id_fk FOREIGN KEY (chat_id) REFERENCES chats(id)
    ON DELETE CASCADE,
  CONSTRAINT chats_users_from_user_id_fk FOREIGN KEY (from_user_id) REFERENCES users(id)
    ON DELETE CASCADE,
  CONSTRAINT chats_users_to_user_id_fk FOREIGN KEY (to_user_id) REFERENCES users(id)
    ON DELETE CASCADE,
  PRIMARY KEY (chat_id, from_user_id, to_user_id)
);

INSERT INTO `chats_users` VALUES 
('6','75','65'),
('24','49','13'),
('30','79','48'),
('25','88','64'),
('33','31','71'),
('18','37','28'),
('10','84','6'),
('19','84','44'),
('8','49','56'),
('37','81','34'),
('3','60','49'),
('31','50','22'),
('50','72','97'),
('15','33','46'),
('29','73','30'),
('23','24','35'),
('1','26','29'),
('41','99','19'),
('48','39','17'),
('43','29','59'),
('12','58','71'),
('49','13','66'),
('7','38','84'),
('21','50','36'),
('47','30','29'),
('28','75','8'),
('4','38','89'),
('38','90','96'),
('16','68','9'),
('34','84','49'),
('26','3','35'),
('17','93','41'),
('40','72','39'),
('22','46','21'),
('42','74','46'),
('32','50','57'),
('2','70','66'),
('5','51','85'),
('46','72','67'),
('13','77','19'),
('45','31','19'),
('36','86','56'),
('35','30','89'),
('39','69','83'),
('9','26','58'),
('27','20','83'),
('14','6','54'),
('20','27','6'),
('44','38','75'),
('11','18','92'); 

DELIMITER //

-- auto generate link for groups
DROP TRIGGER IF EXISTS before_insert_groups//
CREATE TRIGGER before_insert_groups BEFORE INSERT ON `groups` FOR EACH ROW
BEGIN
  IF NEW.link IS NULL
    THEN SET NEW.link = gen_link();
  END IF;
END //

DELIMITER ;

DROP TABLE IF EXISTS `groups`;
CREATE TABLE `groups`(
  id SERIAL PRIMARY KEY,
  title VARCHAR(255) NOT NULL,
  link VARCHAR(100) UNIQUE NULL COMMENT 'Link is auto-generated for private groups',
  is_public BOOLEAN NOT NULL DEFAULT FALSE,
  about VARCHAR(255) NULL,
  photo_id BIGINT UNSIGNED NULL,
  CONSTRAINT groups_photo_id_fk FOREIGN KEY (photo_id) REFERENCES media(id)
    ON DELETE SET NULL,
  created_at DATETIME DEFAULT NOW(),
  updated_at DATETIME DEFAULT NOW() ON UPDATE NOW()
);

INSERT INTO `groups` VALUES 
('1','Maxime sit ut culpa sunt voluptatem. Ullam sit error qui quia qui est velit. Dolorum facere cupiditate eos est consequatur officia. Perspiciatis asperiores qui omnis eaque animi repellat autem.',NULL,'1','Explicabo quaerat dolor tenetur. Facere at quaerat dolor non. Id dolores similique temporibus provident.\nAliquam unde laudantium qui. Id eum provident et quisquam nemo et doloremque.',NULL,'2001-12-01 22:14:45','2010-04-07 19:10:00'),
('2','Animi alias commodi reprehenderit. Et enim tempora nesciunt et eaque ut. Ipsa unde et aut quisquam nostrum velit quo repellendus. Libero ullam qui velit. Facere nulla omnis nobis iusto cupiditate aliquam autem omnis.',NULL,'1','Sunt magni expedita nulla cupiditate. Accusamus provident esse dolorem sint nam. Nisi sit et facilis. Quisquam nihil magnam est repudiandae.','5','1996-03-25 04:42:52','2008-11-11 17:27:39'),
('3','Esse ratione porro ea et eveniet. Sit iure occaecati officia accusamus. Voluptatem dolorem veniam non. Molestiae ut reiciendis laboriosam ad error.','math_ru','1','Esse aut ad et enim possimus occaecati. Id voluptas molestiae illum fugit. Illum tempore suscipit quae quia ad.\nQuod in est voluptate sequi sunt sunt. Natus et labore consectetur nam id eum quidem.','25','1989-04-30 01:08:12','1995-09-14 01:31:22'),
('4','Adipisci ab sed aliquam deleniti. Sint quas voluptas fugiat quisquam voluptatem. Voluptas voluptas officia illo. Et nihil neque assumenda reprehenderit asperiores adipisci.',NULL,'0','Neque in et et qui molestias accusamus. Aperiam quis amet quaerat laudantium voluptates distinctio vero aut. Sit aut voluptates deleniti dolorum.','20','2002-09-14 00:21:39','1974-10-08 02:18:17'),
('5','Ea aut non porro cum quis labore fuga. Laboriosam quasi vitae sapiente ullam. Voluptatem quia distinctio harum voluptatem ea. Sed eius omnis autem ut. Cupiditate id omnis reiciendis sunt repellat facilis. Corporis quo aperiam deserunt sapiente consequatur','ru_python_beginners','1','Est laudantium veniam sed est excepturi deleniti aut. Temporibus libero at enim laborum voluptatum enim doloribus. Voluptatem odio perferendis libero dicta.',NULL,'1979-08-16 02:29:20','1985-09-18 15:29:43'),
('6','Debitis voluptatum beatae ea aliquid reiciendis. Architecto quia et corrupti laudantium. Ipsa aliquam quam dolor consequatur dicta. Nihil quia ut velit.','flutter_en','0','Voluptatem nostrum quia quis. Ipsam et unde quo consequatur id ipsam. Quo fugiat eos sequi culpa consequatur dolores. Sint nobis rem sequi maxime doloribus.','86','2013-05-10 16:55:29','1972-11-19 03:04:13'),
('7','Est et ducimus ut quidem et eveniet. Eos consequatur voluptatem esse provident aut magnam dolorem ea. Aut eius voluptatibus neque velit sequi aut.','flood_ru','1','Laborum consequatur eius illo. Natus necessitatibus velit magni. Vero amet qui deleniti. Alias fugit magnam sequi perferendis aspernatur dolorum.','43','1999-03-11 09:11:37','1995-12-21 10:48:07'),
('8','Voluptatem iure doloribus consequuntur voluptatibus quia. Est voluptas dolore animi molestiae id tenetur. Maxime sapiente voluptas neque vitae. Magnam quod adipisci omnis sint.','bigdata','0','Commodi voluptas at et ad ullam dolores saepe. Provident consequatur libero ut sit quam fuga harum. Non similique quia hic fugit qui.','93','1996-08-14 07:08:56','2011-07-06 12:08:16'),
('9','Occaecati mollitia laudantium eum recusandae tenetur velit. Quia quia quia voluptates rerum et. Et nostrum nulla maiores provident quia modi et. Explicabo vitae debitis molestiae velit.','windows_help','1','Dolorem blanditiis quia qui. Enim tenetur debitis odio inventore. Optio sunt eius perspiciatis at repellat quas illo. Dignissimos vitae ut maxime voluptas hic.','41','2006-07-30 13:52:11','1975-01-29 21:41:55'),
('10','Ut tenetur autem unde dolorum fuga qui ex sint. Numquam cupiditate quam non qui neque dolor ab. Quo sunt provident eum qui non voluptatem consequatur. Nostrum illo qui optio unde ab.',' cpp_chat','1','Aspernatur cupiditate rerum molestiae dolores dolor quo. Ut non doloremque architecto possimus atque porro at. Aspernatur recusandae et dolorem sunt ab. Quod incidunt ipsa in ea.','71','1997-02-26 13:30:50','2007-03-28 02:26:56'),
('11','Enim libero ut veniam vitae illo ut vero. Voluptatibus dolor omnis omnis et maxime omnis. Esse assumenda hic omnis deserunt cum.','android','1','Beatae doloribus aut eius molestiae iure ut veniam. Nam tempore similique ullam harum. Esse omnis nobis ea quia. Molestiae ut qui maxime culpa non autem necessitatibus ab.','59','2006-04-08 22:36:06','1994-11-02 00:05:04'),
('12','Ab amet accusamus veritatis animi sint. Voluptatem beatae officia eveniet beatae. Ut qui accusamus doloribus voluptatem. Eos ut hic omnis maxime. Quod nam libero facere officia sunt ex commodi.','php_chat','1','Sapiente distinctio ad est officiis reprehenderit ut est. Non harum nostrum odit et. Quisquam officiis sed placeat consequatur. Numquam aspernatur accusantium voluptatum facilis.','30','1995-03-10 15:52:02','1990-11-20 18:53:48'),
('13','Velit a unde at. Voluptas soluta rerum illo in temporibus excepturi velit. Dolore esse quidem enim tempore. Amet sapiente adipisci ipsam est. Quia in exercitationem labore quas fugit laudantium.','learn_java','1','Aliquid praesentium asperiores placeat culpa possimus corrupti. Mollitia natus in totam omnis corporis eum. Nesciunt soluta sunt ut sed mollitia voluptas.','79','1984-01-07 02:58:46','1992-02-07 16:49:42'),
('14','Quidem dolores laboriosam mollitia exercitationem. Esse sequi et voluptatem in tempora aut vitae. Itaque officiis culpa aliquid quia. Aut recusandae ut quam ut dolor sunt voluptas consectetur.','ru_python','1','Dolores ab vel tenetur ipsa molestiae aut. Non quod consequatur eos omnis molestiae et. Pariatur illum libero sed nobis nulla unde minus error.','61','2007-04-04 04:47:40','1988-01-14 00:26:13'),
('15','Fugit quis fugit eaque quia. A aut facere inventore cum. Iusto et suscipit sint explicabo. Animi voluptatem fugit et provident. Nesciunt voluptatem dolor quia consectetur quia sint est. Cumque explicabo tempora laudantium reprehenderit.','jojo_memes','1','Laborum corrupti culpa omnis et. Ad non eligendi ipsum nemo aliquid perspiciatis. Dolor numquam omnis voluptas laudantium adipisci consequatur consequatur. Dolor necessitatibus fugit dolores eos.','73','1973-01-25 23:14:28','2015-03-08 22:41:03'),
('16','Non qui dolores aperiam iste ut aperiam id. Optio eos est beatae unde saepe. Ab maiores exercitationem fuga nobis itaque.','linux_help','0','Ut velit autem aut. Qui molestiae dolorum est omnis. Quibusdam ducimus aut molestias expedita consequatur et molestiae.','80','2018-12-28 14:45:27','1973-04-19 08:49:39'),
('17','Suscipit et corrupti vero molestias molestiae molestiae temporibus quibusdam. In sunt maiores voluptates. Quo ipsam itaque molestias aut autem consequatur. Placeat quis et tempora soluta omnis. Commodi repellat tempore itaque aut exercitationem at ut.',NULL,'0','Debitis vel consequatur molestiae aut voluptate. Ea at fuga voluptatem iste ea ipsam. Exercitationem perferendis qui voluptates quidem doloremque id minima.',NULL,'1970-12-23 02:14:30','1981-10-04 20:35:34'),
('18','Vitae quis consectetur omnis sit. Repellat quidem ea fugit veritatis voluptas. Aliquam autem eos aliquid et. Dolor praesentium ea sint quos rerum. Dolor quia est fuga. Perferendis ut iure dolorem sunt quae placeat distinctio.','python_digest','1','Itaque et qui natus qui. Molestiae eveniet quo repellendus eius et eaque optio.','29','1981-04-11 09:40:59','1982-10-01 00:14:20'),
('19','Accusamus aliquid illum corrupti sed temporibus omnis. Deleniti et nulla velit dolorem ut quas repudiandae aut. Quisquam recusandae numquam voluptatem enim itaque deleniti. Ut ratione ut tenetur sit. Quidem eum ut laborum quos modi esse.','blockchain_en','1','Magni itaque doloribus inventore aut laborum possimus et. Quis delectus libero at aut aut quasi. Accusantium dolorem optio dolorum. Ea est dolore autem cum autem.','73','1974-07-08 12:31:12','1973-03-03 07:48:11'),
('20','Ex culpa commodi voluptatum eaque voluptatem et nostrum. Qui consectetur aut quae dolore. At et sunt eos suscipit qui ad. Magni voluptatem harum qui quasi. Nihil nam in illum.',' perl_help','1','Maxime et repellat autem vero in. Ut occaecati similique ut est sed. Deserunt vero et praesentium tempora excepturi non autem. Eaque facere laudantium tempora aut.','1','1984-09-03 18:51:41','2013-03-16 22:21:40'); 


-- connection between users and groups
DROP TABLE IF EXISTS groups_users;
CREATE TABLE groups_users (
  group_id BIgINT UNSIGNED NOT NULL,
  user_id BigINT UNSIGNED NOT NULL,
  user_role INT UNSIGNED NOT NULL,
  user_permissions SET('send_messages', 'send_media', 'send_stickers', 'embed_links', 'send_polls', 'add_members', 'pin_messages', 'change_group_info', 'delete_messages', 'ban_users'),
  CONSTRAINT groups_users_group_id_fk FOREIGN KEY (group_id) REFERENCES `groups`(id)
    ON DELETE CASCADE,
  CONSTRAINT groups_users_user_id_fk FOREIGN KEY (user_id) REFERENCES users(id)
    ON DELETE CASCADE,
  CONSTRAINT groups_users_user_role_fk FOREIGN KEY (user_role) REFERENCES user_roles(id)
    ON DELETE RESTRICT,
  PRIMARY KEY (group_id, user_id)
);

INSERT INTO `groups_users` VALUES 
('1','17','3','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('1','66','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('1','85','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('2','14','3','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('2','15','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('3','3','3','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('3','18','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('3','42','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('3','53','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('3','59','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('3','65','2','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info'),
('3','90','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('3','92','2','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages'),
('3','95','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('4','25','3','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('4','26','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('4','34','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('4','49','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('4','50','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('4','98','2','send_messages,send_media,send_stickers,embed_links,send_polls,delete_messages,ban_users'),
('5','33','3','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('6','3','3','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('6','7','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('6','8','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('6','13','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('6','73','2','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('6','80','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('6','88','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('7','7','3','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('7','10','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('7','14','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('7','28','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('7','31','2','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('7','51','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('7','77','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('7','84','2','send_messages,send_media,send_stickers,embed_links,send_polls,add_members'),
('7','98','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('8','64','3','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('8','65','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('8','95','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('9','10','3','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('9','68','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('9','85','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('9','92','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('9','97','2','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,delete_messages,ban_users'),
('10','43','3','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('10','59','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('10','64','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('10','65','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('10','95','2','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,change_group_info'),
('11','3','3','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('11','6','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('11','28','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('11','30','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('11','54','2','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages'),
('11','92','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('11','95','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('12','11','3','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('12','46','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('12','57','2','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('12','73','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('13','3','3','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('13','6','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('13','23','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('13','43','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('13','76','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('13','84','2','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info'),
('13','98','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('14','25','3','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('15','28','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('15','55','3','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('15','6','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('15','17','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('15','44','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('15','78','2','send_messages,send_media,send_stickers,embed_links,send_polls,add_members'),
('15','83','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('16','2','3','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('16','23','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('17','6','2','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('17','53','3','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('18','1','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('18','6','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('18','21','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('18','29','2','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info'),
('18','56','3','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('18','63','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('19','6','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('19','31','3','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('19','65','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('20','69','3','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('20','80','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('20','94','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('20','9','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('20','15','2','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info,delete_messages,ban_users'),
('20','31','2','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,delete_messages,ban_users'),
('20','47','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('20','48','2','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,pin_messages,change_group_info'),
('20','18','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('20','55','1','send_messages,send_media,send_stickers,embed_links,send_polls'),
('20','3','2','send_messages,send_media,send_stickers,embed_links,send_polls,add_members,delete_messages,ban_users'); 

DROP TABLE IF EXISTS channels_messages;
CREATE TABLE channels_messages (
  id SERIAL PRIMARY KEY,
  from_channel_id BIGINT NULL,
  from_auther_id BIGINT UNSIGNED NULL,
  reply_to_user_id BIGINT UNSIGNED NULL,
  message TEXT NOT NULL,
  delivered BOOLEAN,
  views_count INT UNSIGNED NOT NULL DEFAULT 1,
  media_id BIGINT UNSIGNED NULL,
  CONSTRAINT channels_messages_from_channel_id_fk FOREIGN KEY (from_channel_id) REFERENCES channels(id)
    ON DELETE SET NULL,
  CONSTRAINT channels_messages_from_auther_id_fk  FOREIGN KEY (from_auther_id) REFERENCES users(id)
    ON DELETE SET NULL,
  CONSTRAINT channels_messages_reply_to_user_id_fk  FOREIGN KEY (reply_to_user_id) REFERENCES users(id)
    ON DELETE SET NULL,
  CONSTRAINT groups_users_media_id_fk FOREIGN KEY (media_id) REFERENCES media(id)
    ON DELETE SET NULL,
  INDEX channels_messages_from_auther_id_idx (from_auther_id) COMMENT 'you can search messages by auther',
  created_at DATETIME DEFAULT NOW(),
  edited_at DATETIME DEFAULT NOW() ON UPDATE NOW()
);

INSERT INTO `channels_messages` VALUES 
('1', '6', '93', NULL, "I shall have to ask his neighbour to tell me your history, you know,' said the Mock Turtle; 'but.", '1', '23', '46', '1974-02-03 16:36:19', '1998-06-15 10:59:03'),
('2', '8', '48', NULL, 'Imagine her surprise, when the tide rises and sharks are around, His voice has a timid and.', '1', '26', '9', '2003-09-14 01:02:35', '2006-08-22 18:39:32'),
('3', '2', '2', NULL, "Alice glanced rather anxiously at the March Hare. Visit either you like: they're both mad.' 'But I.", '1', '16', '61', '1998-10-17 03:54:10', '1997-06-09 16:32:55'),
('4', '10', '74', NULL, "I can't understand it myself to begin again, it was written to nobody, which isn't usual, you.", '1', '22', '4', '2001-09-08 19:48:51', '1999-10-29 09:40:09'),
('5', '4', '5', NULL, "Still she went on muttering over the verses on his spectacles. 'Where shall I begin, please your.", '1', '17', '4', '2018-01-02 09:19:02', '1984-03-07 10:39:10'),
('6', '1', '58', NULL, "There could be no doubt that it might injure the brain; But, now that I'm perfectly sure I don't.", '1', '38', '70', '2019-07-31 14:07:02', '2005-05-09 06:25:30'),
('7', '6', '93', NULL, 'WATCH OUT OF ITS WAISTCOAT-POCKET, and looked at them with the Mouse was bristling all over, and.', '1', '14', '88', '1971-06-15 02:20:36', '2015-05-08 08:32:36'),
('8', '4', '4', '5', "Caterpillar. 'Well, perhaps your feelings may be ONE.' 'One, indeed!' said the Caterpillar. 'Well,.", '1', '6', '88', '1987-02-17 21:19:14', '1980-12-01 11:43:49'),
('9', '2', '2', NULL, "Arithmetic--Ambition, Distraction, Uglification, and Derision.' 'I never said I didn't!'.", '1', '13', '19', '1989-02-17 21:46:24', '1972-02-25 13:52:40'),
('10', '5', '61', NULL, "Caterpillar took the regular course.' 'What was that?' inquired Alice. 'Reeling and Writhing, of.", '1', '10', '67', '1986-11-13 11:54:20', '1998-08-07 22:29:16'),
('11', '1', '58', NULL, "There was exactly three inches high). 'But I'm NOT a serpent!' said Alice indignantly, and she.", '1', '40', '40', '2001-07-24 06:42:17', '1971-03-27 23:12:22'),
('12', '6', '93', NULL, 'So Alice got up and say "Who am I to do next, when suddenly a White Rabbit as he found it very.', '1', '46', '66', '2001-07-02 02:46:06', '2013-10-17 21:50:54'),
('13', '10', '74', NULL, "Has lasted the rest of the garden, and I shall fall right THROUGH the earth! How funny it'll seem.", '1', '31', '93', '1976-05-21 06:51:16', '2009-12-22 15:40:17'),
('14', '2', '26', '2', 'I get" is the same height as herself; and when she had never seen such a curious dream!\' said.', '0', '1', '68', '2004-05-22 14:40:50', '2001-01-04 01:18:43'),
('15', '1', '21', NULL, "Alice again, for really I'm quite tired of being such a noise inside, no one to listen to me! When.", '1', '70', '44', '1978-04-13 13:19:33', '2008-02-23 23:26:20'),
('16', '8', '48', NULL, "ME' beautifully printed on it but tea. 'I don't like the look of it in her hands, and she drew.", '1', '59', '92', '1984-09-13 16:34:59', '2015-10-18 04:49:11'),
('17', '9', '75', NULL, "I suppose you'll be asleep again before it's done.' 'Once upon a little scream, half of them--and.", '0', '1', '39', '1993-09-12 03:03:57', '2010-05-08 14:57:37'),
('18', '5', '7', NULL, "Alice. 'I wonder what was on the trumpet, and called out in a low, hurried tone. He looked at the.", '1', '32', '82', '2018-04-20 03:41:18', '1992-11-30 21:08:06'),
('19', '4', '8', NULL, 'The soldiers were silent, and looked very uncomfortable. The moment Alice appeared, she was now.', '1', '53', '4', '2015-09-18 05:31:43', '2019-06-06 11:23:42'),
('20', '8', '48', NULL, "Dodo solemnly presented the thimble, looking as solemn as she could, 'If you do. I'll set Dinah at.", '1', '6', '93', '1997-11-09 08:02:02', '1987-01-06 12:39:44'),
('21', '6', '93', NULL, "White Rabbit blew three blasts on the Duchess's knee, while plates and dishes crashed around.", '1', '45', '55', '2013-04-07 23:20:48', '1976-01-04 22:18:59'),
('22', '9', '75', NULL, "Alice. 'I wonder if I chose,' the Duchess asked, with another hedgehog, which seemed to be full of.", '1', '49', '63', '2002-05-11 22:53:16', '2000-09-23 03:03:18'),
('23', '5', '56', NULL, "There's no pleasing them!' Alice was soon left alone. 'I wish the creatures argue. It's enough to.", '1', '45', '71', '1996-03-14 21:26:02', '1982-09-09 19:55:45'),
('24', '3', '34', NULL, "Alice thought), and it sat down again into its eyes again, to see you again, you dear old thing!'.", '1', '46', '17', '2000-12-30 11:45:21', '1974-07-03 12:30:47'),
('25', '5', '61', NULL, 'Suddenly she came in sight of the court," and I could let you out, you know.\' He was an immense.', '1', '3', '39', '1986-10-11 11:53:54', '1980-04-23 16:39:58'),
('26', '2', '26', NULL, "Nile On every golden scale! 'How cheerfully he seems to like her, down here, that I should think.", '1', '26', '32', '2009-05-29 22:55:29', '1991-04-29 00:55:36'),
('27', '3', '59', NULL, "Hare. 'Exactly so,' said the Cat: 'we're all mad here. I'm mad. You're mad.' 'How do you like the.", '1', '19', '42', '1996-10-27 07:21:37', '1974-04-21 07:04:22'),
('28', '10', '74', NULL, 'Dodo, pointing to the game. CHAPTER IX. The Mock Turtle with a bound into the jury-box, or they.', '1', '36', '86', '2014-02-26 01:30:38', '2004-11-22 15:56:37'),
('29', '5', '61', NULL, 'Laughing and Grief, they used to know. Let me see--how IS it to make out what she did, she picked.', '1', '67', '8', '1979-10-23 09:20:54', '2004-06-18 20:55:27'),
('30', '5', '56', NULL, "And in she went. Once more she found she had quite forgotten the words.' So they had settled down.", '1', '47', '52', '1982-01-17 22:58:53', '1995-03-13 10:21:25'),
('31', '6', '93', NULL, "How I wonder what I say,' the Mock Turtle: 'nine the next, and so on.' 'What a number of.", '1', '15', '79', '1985-07-07 00:56:52', '2009-04-07 08:28:48'),
('32', '10', '74', NULL, "HAVE my shoulders got to? And oh, my poor hands, how is it directed to?' said the Hatter. 'I told.", '1', '5', '73', '1973-05-21 02:23:16', '1973-05-17 16:28:26'),
('33', '1', '52', NULL, 'VERY unpleasant state of mind, she turned to the Hatter. Alice felt that she knew she had gone.', '1', '54', '71', '1972-10-10 21:23:27', '1976-07-22 03:15:09'),
('34', '8', '48', NULL, 'Alice called out to sea as you might like to try the effect: the next thing is, to get us dry.', '1', '30', '98', '1992-05-20 22:24:05', '2014-08-28 04:16:19'),
('35', '4', '5', NULL, 'SOME change in my size; and as it went. So she set to work throwing everything within her reach at.', '1', '59', '20', '2014-06-07 05:28:12', '2011-11-14 03:44:52'),
('36', '3', '11', NULL, "Cheshire cats always grinned; in fact, a sort of present!' thought Alice. One of the court. (As.", '1', '7', '45', '2006-07-14 20:56:11', '1972-03-30 16:20:33'),
('37', '3', '11', NULL, "Story 'You can't think how glad I am now? That'll be a grin, and she drew herself up and down in a.", '1', '58', '11', '2011-01-26 11:49:39', '1991-03-05 13:42:27'),
('38', '3', '34', NULL, "Gryphon remarked: 'because they lessen from day to such stuff? Be off, or I'll have you got in as.", '1', '48', '95', '1982-08-16 05:36:25', '1992-07-17 00:48:48'),
('39', '2', '2', NULL, "I've tried hedges,' the Pigeon in a very short time the Mouse was bristling all over, and she swam.", '1', '62', '41', '2001-08-10 18:34:41', '2005-06-29 10:45:24'),
('40', '2', '26', NULL, 'The Queen had ordered. They very soon had to do this, so that they must needs come wriggling down.', '1', '69', '45', '2007-04-01 19:50:45', '2007-10-11 00:43:03'),
('41', '5', '61', NULL, "I only wish they COULD! I'm sure she's the best thing to nurse--and she's such a curious dream,.", '1', '63', '46', '1986-08-03 14:57:03', '1978-02-14 08:56:15'),
('42', '3', '34', NULL, "Queen, stamping on the end of your nose-- What made you so awfully clever?' 'I have answered three.", '1', '50', '17', '1974-09-07 08:17:17', '2004-06-07 09:34:33'),
('43', '7', '97', NULL, "CHAPTER VIII. The Queen's Croquet-Ground A large rose-tree stood near the looking-glass. There was.", '1', '33', '52', '2011-08-28 00:55:44', '1985-10-09 15:34:07'),
('44', '1', '58', NULL, "They are waiting on the trumpet, and then said 'The fourth.' 'Two days wrong!' sighed the Hatter..", '1', '65', '98', '1970-12-16 13:20:05', '2011-07-26 22:55:08'),
('45', '4', '5', NULL, "I should like to hear it say, as it lasted.) 'Then the eleventh day must have been that,' said the.", '1', '51', '93', '1971-04-03 07:22:31', '1985-01-10 02:12:15'),
('46', '2', '2', NULL, 'Duchess was VERY ugly; and secondly, because she was quite silent for a moment to be lost: away.', '1', '42', '75', '1971-07-04 19:08:02', '2019-07-08 04:08:47'),
('47', '9', '75', NULL, "YOUR adventures.' 'I could tell you how it was all about, and shouting 'Off with his nose, and.", '1', '43', '59', '1975-12-08 22:01:21', '1984-11-16 20:28:39'),
('48', '3', '11', NULL, "Mock Turtle replied; 'and then the Mock Turtle recovered his voice, and, with tears again as she.", '1', '16', '52', '1996-08-24 21:26:12', '2002-11-19 09:00:03'),
('49', '6', '93', NULL, "Alice ventured to ask. 'Suppose we change the subject. 'Ten hours the first to break the silence..", '1', '57', '91', '2003-04-17 22:48:49', '1994-08-23 21:59:57'),
('50', '6', '93', NULL, "Alice thought the whole party swam to the heads of the month, and doesn't tell what o'clock it.", '1', '58', '21', '2002-01-22 22:18:02', '1984-07-28 06:34:30'),
('51', '9', '75', NULL, "Dormouse. 'Fourteenth of March, I think you'd take a fancy to herself as she could. The next thing.", '1', '36', '11', '2013-04-12 11:05:23', '1992-12-18 19:04:52'),
('52', '2', '26', NULL, "You MUST have meant some mischief, or else you'd have signed your name like an arrow. The Cat's.", '1', '44', '20', '1974-09-12 16:16:09', '1988-04-02 06:18:18'),
('53', '4', '4', NULL, "And the Gryphon added 'Come, let's hear some of YOUR business, Two!' said Seven. 'Yes, it IS his.", '1', '17', '74', '1985-09-25 01:43:44', '1993-04-11 11:27:15'),
('54', '5', '39', NULL, 'White Rabbit, trotting slowly back again, and the Mock Turtle sighed deeply, and drew the back of.', '1', '58', '40', '1971-10-24 00:25:19', '1971-02-22 21:27:46'),
('55', '2', '2', NULL, "And she squeezed herself up closer to Alice's side as she could remember about ravens and.", '1', '42', '78', '1998-05-11 10:53:40', '1998-11-04 01:26:44'),
('56', '7', '94', NULL, "Dormouse indignantly. However, he consented to go on. 'And so these three little sisters,' the.", '1', '31', '33', '1976-08-14 10:45:17', '1990-03-02 09:05:05'),
('57', '2', '2', NULL, "Mouse heard this, it turned round and get ready to ask the question?' said the Hatter said,.", '1', '12', '60', '2013-04-17 06:58:12', '2011-01-29 04:42:37'),
('58', '7', '97', NULL, 'How puzzling all these strange Adventures of hers that you never had to run back into the teapot..', '1', '40', '12', '2011-09-07 07:06:27', '1995-09-05 00:05:43'),
('59', '5', '61', NULL, 'Queen was silent. The King looked anxiously over his shoulder with some surprise that the Gryphon.', '1', '9', '30', '2019-04-26 19:50:09', '2018-01-12 22:35:58'),
('60', '7', '97', NULL, "I hadn't mentioned Dinah!' she said this, she was nine feet high, and she felt a little timidly,.", '1', '61', '79', '1974-04-18 15:27:06', '1979-04-15 06:05:13'),
('61', '2', '26', NULL, "You see the Mock Turtle, 'but if you've seen them so shiny?' Alice looked round, eager to see that.", '1', '57', '32', '2005-07-26 21:37:27', '1996-08-17 22:05:42'),
('62', '2', '2', NULL, "Alice. 'I'm glad they've begun asking riddles.--I believe I can creep under the door; so either.", '1', '42', '60', '2009-02-28 07:50:00', '2010-09-13 11:11:20'),
('63', '9', '75', NULL, "However, the Multiplication Table doesn't signify: let's try the thing at all. 'But perhaps he.", '1', '59', '92', '1982-10-07 03:19:03', '2007-03-28 09:38:08'),
('64', '5', '7', NULL, "There was a dispute going on rather better now,' she added aloud. 'Do you take me for his.", '1', '57', '9', '1983-10-30 08:50:46', '1974-03-08 12:27:20'),
('65', '4', '5', NULL, 'King said, turning to Alice. \'What IS a Caucus-race?\' said Alice; \'living at the house, "Let us.', '1', '54', '68', '1982-03-12 20:39:49', '1981-12-17 09:31:33'),
('66', '7', '94', NULL, "The pepper when he sneezes: He only does it matter to me whether you're a little before she had.", '1', '68', '50', '1997-06-26 20:25:08', '2008-01-29 01:40:40'),
('67', '7', '97', NULL, 'Gryphon at the mouth with strings: into this they slipped the guinea-pig, head first, and then.', '1', '9', '20', '2015-12-15 22:54:52', '1993-08-19 04:10:07'),
('68', '1', '73', NULL, 'Alice had no reason to be a footman in livery, with a smile. There was a very little use without.', '1', '43', '72', '1973-05-30 11:36:25', '2019-08-06 04:45:55'),
('69', '7', '94', NULL, "Gryphon only answered 'Come on!' cried the Gryphon, and the words don't FIT you,' said the King:.", '1', '7', '27', '2005-11-04 18:09:34', '1973-04-25 09:08:17'),
('70', '1', '21', NULL, "Alice, in a moment. 'Let's go on with the strange creatures of her little sister's dream. The long.", '1', '11', '25', '1991-10-06 07:38:07', '2006-04-12 06:52:55'),
('71', '5', '7', NULL, "Mock Turtle sighed deeply, and began, in rather a complaining tone, 'and they all quarrel so.", '1', '13', '34', '1983-03-21 19:53:32', '1978-04-11 08:47:17'),
('72', '3', '11', NULL, "Suppress him! Pinch him! Off with his knuckles. It was the first day,' said the Caterpillar. This.", '1', '44', '68', '2019-09-05 09:07:58', '1993-11-07 15:00:34'),
('73', '6', '93', NULL, 'Alice, very much pleased at having found out that it might appear to others that what you would.', '1', '12', '40', '2008-03-29 02:38:00', '1988-05-02 09:12:34'),
('74', '9', '75', NULL, "Queen. 'Well, I should think very likely it can be,' said the Mock Turtle angrily: 'really you are.", '1', '8', '16', '1996-12-29 07:28:45', '1996-09-06 07:03:01'),
('75', '7', '97', NULL, "The Mouse looked at poor Alice, 'it would have this cat removed!' The Queen smiled and passed on..", '1', '52', '20', '2006-09-07 09:44:47', '1970-06-21 06:14:57'),
('76', '3', '34', NULL, 'Kings and Queens, and among them Alice recognised the White Rabbit with pink eyes ran close by it,.', '0', '1', '1', '1982-07-18 09:12:57', '1998-12-26 15:51:53'),
('77', '5', '56', NULL, "Where CAN I have to fly; and the little door, so she began again: 'Ou est ma chatte?' which was a.", '1', '5', '16', '1972-07-29 20:02:00', '2016-01-22 21:23:17'),
('78', '2', '26', NULL, "Puss,' she began, in a bit.' 'Perhaps it hasn't one,' Alice ventured to remark. 'Tut, tut, child!'.", '1', '46', '44', '1972-03-28 02:46:45', '2000-06-13 01:43:59'),
('79', '8', '48', NULL, "Alice's elbow was pressed so closely against her foot, that there was no one else seemed inclined.", '1', '9', '87', '1976-12-05 17:02:15', '1981-10-03 14:29:09'),
('80', '6', '93', NULL, "Caterpillar contemptuously. 'Who are YOU?' Which brought them back again to the general.", '1', '10', '31', '1995-04-17 13:14:39', '2012-03-05 00:48:19'),
('81', '3', '34', NULL, "What WILL become of you? I gave her answer. 'They're done with blacking, I believe.' 'Boots and.", '1', '8', '7', '2002-02-15 07:27:00', '2000-01-31 13:14:40'),
('82', '4', '5', NULL, "ALL PERSONS MORE THAN A MILE HIGH TO LEAVE THE COURT.' Everybody looked at the end of the well,.", '1', '22', '93', '1978-04-06 03:40:49', '1988-12-04 03:21:55'),
('83', '6', '93', NULL, "Hatter, 'when the Queen never left off staring at the Duchess and the baby joined):-- 'Wow! wow!.", '1', '58', '98', '1976-06-26 19:21:13', '1984-01-31 00:31:18'),
('84', '10', '74', NULL, "Alice's first thought was that it would not join the dance? Will you, won't you, will you, old.", '1', '63', '73', '1991-09-27 13:45:00', '2003-09-04 06:03:20'),
('85', '5', '61', NULL, 'CHAPTER IV. The Rabbit started violently, dropped the white kid gloves: she took up the chimney,.', '1', '5', '95', '1980-01-10 06:00:33', '1975-08-26 20:07:52'),
('86', '7', '97', NULL, "Dormouse!' And they pinched it on both sides at once. The Dormouse again took a minute or two,.", '1', '46', '53', '2016-10-16 00:21:32', '1986-02-07 22:36:20'),
('87', '8', '48', NULL, "When she got up, and there they are!' said the Duchess; 'I never was so small as this before,.", '1', '21', '29', '1982-04-08 20:56:42', '2006-11-28 00:10:43'),
('88', '3', '11', NULL, 'I could not be denied, so she tried to open them again, and made another rush at the top of his.', '1', '60', '38', '2005-03-06 20:22:11', '1998-08-09 12:18:53'),
('89', '6', '93', NULL, "Who in the sea!' cried the Gryphon, and all dripping wet, cross, and uncomfortable. The moment.", '1', '12', '19', '1970-04-01 01:09:25', '1970-03-29 04:10:54'),
('90', '3', '59', NULL, "I will prosecute YOU.--Come, I'll take no denial; We must have got altered.' 'It is a long and a.", '1', '33', '6', '2001-08-09 02:16:57', '1987-09-04 05:58:42'),
('91', '9', '75', NULL, 'Mouse, frowning, but very politely: \'Did you say things are "much of a procession,\' thought she,.', '1', '21', '26', '1973-10-18 17:33:37', '1990-03-31 18:05:57'),
('92', '10', '74', NULL, 'As she said to the table for it, while the rest waited in silence. Alice was a very short time the.', '1', '52', '53', '2009-08-11 06:13:11', '2004-10-19 02:12:15'),
('93', '10', '74', NULL, "Rabbit coming to look at it!' This speech caused a remarkable sensation among the party. Some of.", '1', '19', '1', '2009-08-17 03:49:04', '1992-08-17 16:56:14'),
('94', '8', '48', NULL, "Hatter said, tossing his head mournfully. 'Not I!' he replied. 'We quarrelled last March--just.", '1', '17', '4', '1980-07-31 05:41:17', '1972-05-01 13:02:55'),
('95', '2', '26', NULL, "March Hare moved into the wood to listen. 'Mary Ann! Mary Ann!' said the youth, 'and your jaws are.", '1', '23', '29', '2000-02-08 08:54:00', '1983-11-09 12:01:39'),
('96', '3', '59', NULL, 'Mabel after all, and I shall have to whisper a hint to Time, and round goes the clock in a.', '1', '41', '23', '1975-09-20 01:08:35', '2006-02-24 21:56:15'),
('97', '8', '48', NULL, "EVEN finish, if he thought it would not open any of them. 'I'm sure I'm not myself, you see.' 'I.", '1', '70', '46', '2007-04-04 18:45:54', '2007-07-11 17:27:50'),
('98', '7', '94', NULL, "March Hare. 'I didn't know that cats COULD grin.' 'They all can,' said the King. 'Shan't,' said.", '1', '68', '71', '2013-05-01 20:38:07', '2018-04-07 09:02:05'),
('99', '10', '74', NULL, "Fish-Footman was gone, and the Dormouse say?' one of the court, by the hedge!' then silence, and.", '1', '7', '31', '1974-05-12 06:20:03', '2005-07-27 15:10:06'),
('100', '3', '59', NULL, 'Gryphon repeated impatiently: \'it begins "I passed by his face only, she would feel very sleepy.', '1', '23', '27', '2006-06-15 18:43:47', '1991-04-19 05:21:25');


DROP TABLE IF EXISTS groups_and_chats_messages;
CREATE TABLE groups_and_chats_messages (
  id SERIAL PRIMARY KEY,
  from_group_id BIGINT UNSIGNED NULL,
  from_chat_id BIGINT UNSIGNED NULL,
  from_user_id BIGINT UNSIGNED NULL,
  reply_to_user_id BIGINT UNSIGNED NULL,
  message TEXT NOT NULL,
  delivered BOOLEAN,
  media_id BIGINT UNSIGNED NULL,
  CONSTRAINT groups_and_chats_messages_from_group_id_fk FOREIGN KEY (from_group_id) REFERENCES `groups`(id)
    ON DELETE SET NULL,
  CONSTRAINT groups_and_chats_messages_from_chat_id_fk  FOREIGN KEY (from_chat_id) REFERENCES chats(id)
    ON DELETE SET NULL,
  CONSTRAINT groups_and_chats_messages_from_user_id_fk  FOREIGN KEY (from_user_id) REFERENCES users(id)
    ON DELETE SET NULL,
  CONSTRAINT groups_and_chats_messages_reply_to_user_id_fk  FOREIGN KEY (reply_to_user_id) REFERENCES users(id)
    ON DELETE SET NULL,
  CONSTRAINT groups_and_chats_messages_media_id_fk FOREIGN KEY (media_id) REFERENCES media(id)
    ON DELETE SET NULL,
  INDEX groups_and_chats_messages_from_user_id_idx (from_user_id) COMMENT 'you can search messages by user',
  created_at DATETIME DEFAULT NOW(),
  edited_at DATETIME DEFAULT NOW() ON UPDATE NOW()
);

DELIMITER //

DROP TRIGGER IF EXISTS group_id_and_chat_id_check;
CREATE TRIGGER group_id_and_chat_id_check BEFORE INSERT ON groups_and_chats_messages FOR EACH ROW
BEGIN
  IF NEW.from_group_id IS NULL AND NEW.from_chat_id IS NULL
    THEN SIGNAL sqlstate '45001' SET message_text = "from_group_id and from_chat_id can not be both NULL"; 
  END IF;
END //

DELIMITER ;

INSERT INTO `groups_and_chats_messages` VALUES 
('1', '12', NULL, '57',NULL, "Alice, so please your Majesty,' said Alice more boldly: 'you know you're growing too.' 'Yes, but.", '1', '56', '1994-08-06 07:04:55', '2000-11-27 18:21:53'),
('2', '12', NULL, '57',NULL, "I think?' he said in a shrill, passionate voice. 'Would YOU like cats if you cut your finger VERY.", '1', '29', '1986-02-14 09:08:57', '2006-09-21 02:28:29'),
('3', '10', NULL, '43',NULL, "Either the well was very uncomfortable, and, as a partner!' cried the Mock Turtle yawned and shut.", '0', '89', '1974-12-28 13:10:34', '1971-01-07 12:29:43'),
('4', '4', NULL, '98',NULL, "I could show you our cat Dinah: I think you'd take a fancy to herself 'This is Bill,' she gave her.", '1', '88', '1978-01-22 06:28:50', '1994-03-11 21:47:43'),
('5', '12', NULL, '11',NULL, "Rabbit's voice; and the bright flower-beds and the Dormouse followed him: the March Hare said to.", '1', '18', '2000-05-11 21:46:43', '1980-07-06 08:52:50'),
('6', '1', NULL, '17',NULL, "Alice thought this a very pretty dance,' said Alice doubtfully: 'it.", '1', '83', '1997-01-15 07:14:29', '2012-07-22 18:57:06'),
('7', '8', NULL, '64',NULL, "Dodo had paused as if nothing had happened. 'How am I to get us dry would be worth the trouble of.", '1', '26', '1974-10-02 09:58:28', '1980-01-26 02:19:43'),
('8', '17', NULL, '53',NULL, "Hatter, 'when the Queen of Hearts were seated on their slates, and she tried the effect of lying.", '1', '3', '1985-11-04 23:07:00', '1972-02-02 21:54:15'),
('9', '2', NULL, '14',NULL, "However, this bottle does. I do so like that curious song about the whiting!' 'Oh, as to size,'.", '1', '60', '2004-10-19 01:33:19', '1971-12-16 14:56:14'),
('10', '1', NULL, '17',NULL, "THESE?' said the White Rabbit as he could go. Alice took up the chimney, and said to Alice, and.", '1', '71', '1972-06-20 11:03:35', '1979-09-19 21:49:00'),
('11', '13', NULL, '84',NULL, "Queen had never before seen a cat without a cat! It's the most important piece of rudeness was.", '1', '89', '1990-01-13 05:19:31', '2006-09-14 04:45:23'),
('12', '4', NULL, '98',NULL, "Cat, 'if you don't explain it is I hate cats and dogs.' It was high time you were INSIDE, you.", '1', '32', '1982-12-10 07:54:36', '1999-10-17 10:09:04'),
('13', '18', NULL, '29',NULL, 'THAT in a melancholy way, being quite unable to move. She soon got it out to the cur, "Such a.', '1', '83', '1997-04-06 16:58:33', '1996-08-11 00:03:01'),
('14', '2', NULL, '14',NULL, "King, with an anxious look at them--'I wish they'd get the trial one way up as the jury had a bone.", '0', '42', '2001-09-28 07:09:14', '2003-10-31 19:52:24'),
('15', '11', NULL, '54',NULL, "Nile On every golden scale! 'How cheerfully he seems to grin, How neatly spread his claws, And.", '1', '44', '1998-04-18 09:10:29', '2002-11-06 17:24:40'),
('16', '15', NULL, '55',NULL, "Alice had been would have done that?' she thought. 'I must be really offended. 'We won't talk.", '1', '97', '1979-11-30 20:41:14', '1981-03-15 21:23:30'),
('17', '2', NULL, '14',NULL, "I'm not myself, you see.' 'I don't think--' 'Then you keep moving round, I suppose?' said Alice..", '0', '52', '2004-10-31 18:10:26', '1993-03-16 00:15:16'),
('18', '8', NULL, '64',NULL, "VERY wide, but she stopped hastily, for the immediate adoption of more broken glass.) 'Now tell.", '1', '34', '1994-09-06 19:57:25', '1980-08-30 05:59:45'),
('19', '2', NULL, '14',NULL, "Footman continued in the wood,' continued the Hatter, and, just as the large birds complained that.", '1', '69', '2016-02-12 16:49:49', '2006-05-26 12:17:21'),
('20', '5', NULL, '33',NULL, "Why, she'll eat a little timidly, 'why you are very dull!' 'You ought to tell me who YOU are,.", '1', '55', '2009-02-12 10:02:32', '1989-12-21 04:41:26'),
('21', '5', NULL, '33',NULL, 'Said the mouse doesn\'t get out." Only I don\'t like them!\' When the procession moved on, three of.', '1', '51', '1998-10-23 07:36:12', '1999-05-12 15:32:38'),
('22', '13', NULL, '84',NULL, "ME.' 'You!' said the Dormouse, without considering at all this grand procession, came THE KING AND.", '1', '49', '1986-12-26 12:08:36', '1972-04-15 10:47:41'),
('23', '12', NULL, '11',NULL, "English coast you find a thing,' said the Queen. 'Their heads are gone, if it makes rather a.", '1', '18', '1977-12-29 01:53:54', '2019-04-02 13:06:33'),
('24', '7', NULL, '7',NULL, "This time Alice waited till the Pigeon in a hoarse, feeble voice: 'I heard every word you fellows.", '0', '9', '1983-07-16 05:39:16', '1995-02-03 04:29:46'),
('25', '1', NULL, '17',NULL, 'So you see, Miss, this here ought to have changed since her swim in the wind, and was going to.', '1', '13', '2018-09-06 17:06:22', '2002-12-29 15:18:27'),
('26', '14', NULL, '25',NULL, 'First, she dreamed of little cartwheels, and the constant heavy sobbing of the jurors had a wink.', '1', '19', '2009-01-02 20:03:59', '1997-12-08 02:43:18'),
('27', '15', NULL, '55',NULL, "NOT be an advantage,' said Alice, (she had kept a piece of bread-and-butter in the direction it.", '1', '50', '2001-12-28 00:07:03', '2008-03-04 03:43:11'),
('28', '8', NULL, '64',NULL, "Rabbit angrily. 'Here! Come and help me out of his great wig.' The judge, by the little thing.", '1', '93', '1999-11-21 11:53:00', '1984-07-07 13:30:39'),
('29', '4', NULL, '98',NULL, "T!' said the Dormouse, not choosing to notice this last remark that had made her feel very queer.", '1', '75', '2004-05-16 13:46:13', '1972-12-02 23:59:53'),
('30', '9', NULL, '10',NULL, As she said this, she noticed that they would go, and broke to pieces against one of the birds.', '1', '14', '2018-03-16 08:27:03', '2010-04-04 04:22:58'),
('31', '10', NULL, '95',NULL, "Mouse replied rather crossly: 'of course you don't!' the Hatter went on, 'you see, a dog growls.", '1', '3', '1999-12-08 20:07:14', '1980-11-13 20:45:57'),
('32', '18', NULL, '29',NULL, "March Hare. 'Exactly so,' said the Knave, 'I didn't know it to her usual height. It was so long.", '1', '19', '1989-05-22 23:33:17', '1976-02-04 16:23:44'),
('33', '12', NULL, '57',NULL, "Wonderland of long ago: and how she would keep, through all her fancy, that: he hasn't got no.", '1', '72', '1971-10-07 16:46:09', '2008-07-18 03:37:45'),
('34', '5', NULL, '33',NULL, "Off with his nose, you know?' 'It's the oldest rule in the middle of the cattle in the world go.", '0', '62', '1998-01-08 05:01:57', '1996-08-07 06:46:53'),
('35', '16', NULL, '2',NULL, "You know the song, she kept fanning herself all the jurymen on to the jury. 'Not yet, not yet!'.", '0', '15', '2018-09-06 11:06:15', '1996-07-14 20:39:20'),
('36', '11', NULL, '54',NULL, "I could say if I know I do!' said Alice a good deal until she made out the proper way of nursing.", '1', '57', '2009-11-30 07:20:24', '1992-10-15 08:09:00'),
('37', '18', NULL, '56',NULL, "Queen. 'I haven't the slightest idea,' said the Gryphon. Alice did not like the look of the.", '1', '35', '1985-05-26 05:50:05', '2011-03-29 11:37:54'),
('38', '18', NULL, '56',NULL, "I look like one, but the Rabbit was still in existence; 'and now for the accident of the Shark,.", '1', '75', '2013-12-06 04:29:28', '2009-01-11 15:58:11'),
('39', '7', NULL, '7',NULL, "I ask! It's always six o'clock now.' A bright idea came into her face. 'Wake up, Alice dear!' said.", '1', '36', '2009-05-24 06:48:06', '1977-09-03 12:04:28'),
('40', '5', NULL, '33',NULL, 'I know is, something comes at me like a snout than a real nose; also its eyes by this time.).', '1', '19', '1998-11-11 07:50:20', '2010-07-20 02:16:06'),
('41', '18', NULL, '56',NULL, 'Queen had only one way of expecting nothing but a pack of cards: the Knave was standing before.', '1', '57', '2016-01-10 14:51:16', '2007-08-29 22:34:39'),
('42', '20', NULL, '48',NULL, 'Mock Turtle\'s Story \'You can\'t think how glad I am in the air. \'--as far out to sea!" But the.', '1', '88', '1976-11-20 01:53:45', '1993-08-27 07:53:25'),
('43', '20', NULL, '15',NULL, "It means much the most curious thing I ever heard!' 'Yes, I think that there ought! And when I.", '0', '76', '1989-01-12 01:36:07', '2007-07-04 11:02:21'),
('44', '2', NULL, '14',NULL, "The King looked anxiously round, to make personal remarks,' Alice said nothing; she had got to see.", '1', '84', '2011-11-25 06:09:59', '1979-03-12 02:57:01'),
('45', '6', NULL, '73',NULL, 'You see the Mock Turtle sighed deeply, and began, in rather a hard word, I will prosecute.', '1', '69', '1976-05-30 12:17:18', '1986-01-20 02:13:22'),
('46', '20', NULL, '48',NULL, 'Alice said nothing; she had drunk half the bottle, she found she had to pinch it to make out what.', '1', '91', '2016-04-15 11:32:59', '2019-06-25 00:07:25'),
('47', '5', NULL, '33',NULL, "It's the most confusing thing I ask! It's always six o'clock now.' A bright idea came into Alice's.", '1', '49', '1992-02-14 20:50:34', '2010-02-07 15:39:45'),
('48', '10', NULL, '95',NULL, "This question the Dodo said, 'EVERYBODY has won, and all her life. Indeed, she had forgotten the.", '1', '80', '2001-06-10 20:07:49', '2018-02-15 05:27:38'),
('49', '8', NULL, '64',NULL, "I needn't be so kind,' Alice replied, so eagerly that the hedgehog to, and, as the White Rabbit,.", '1', '13', '2003-10-05 09:33:58', '1981-08-13 05:26:54'),
('50', '7', NULL, '7',NULL, 'There are no mice in the long hall, and close to her, though, as they all spoke at once, she found.', '1', '45', '2013-05-02 19:59:07', '1989-12-01 22:38:45'),
('51', '17', NULL, '53',NULL, "I used--and I don't like the look of the trees upon her knee, and looking anxiously about her..", '1', '78', '2001-11-20 01:10:36', '1991-06-21 10:20:33'),
('52', '17', NULL, '6',NULL, 'I like"!\' \'You might just as if his heart would break. She pitied him deeply. \'What is his.', '1', '87', '2006-02-23 15:22:12', '1991-01-27 09:05:41'),
('53', '3', NULL, '92', NULL, 'Alice, as she did not dare to laugh; and, as the Lory positively refused to tell them something.', '1', '23', '1989-03-24 20:11:37', '1998-01-30 18:11:43'),
('54', '1', NULL, '17',NULL, "March Hare interrupted, yawning. 'I'm getting tired of sitting by her sister kissed her, and said,.", '1', '75', '1979-01-31 05:02:52', '1991-07-02 16:59:21'),
('55', '5', NULL, '33',NULL, "Queen in a great hurry. 'You did!' said the Mock Turtle. 'Certainly not!' said Alice sharply, for.", '1', '12', '2019-06-04 13:13:17', '2017-06-05 16:22:50'),
('56', '10', NULL, '95',NULL, "VERY deeply with a little now and then quietly marched off after the birds! Why, she'll eat a.", '1', '38', '2016-05-17 14:17:06', '1990-11-02 15:56:40'),
('57', '12', NULL, '11',NULL, "Duchess: you'd better ask HER about it.' 'She's in prison,' the Queen say only yesterday you.", '1', '34', '2002-09-01 12:19:42', '2003-07-21 07:53:52'),
('58', '8', NULL, '64',NULL, "The Hatter was the same as they were nice grand words to say.) Presently she began again. 'I.", '1', '88', '1973-06-02 19:19:04', '1987-07-11 10:24:50'),
('59', '5', NULL, '33',NULL, "Alice thought the poor little juror (it was exactly three inches high). 'But I'm not used to it!'.", '1', '28', '2001-08-12 07:56:04', '1981-08-27 14:15:20'),
('60', '11', NULL, '54',NULL, "Alice said nothing; she had found the fan and a long breath, and till the Pigeon had finished. 'As.", '1', '67', '1986-05-07 17:09:09', '1978-08-30 09:01:39'),
('61', '10', NULL, '43',NULL, "The Cat's head with great emphasis, looking hard at Alice as he shook both his shoes on. '--and.", '1', '53', '2013-03-05 03:47:06', '1994-12-08 17:30:06'),
('62', '17', NULL, '6',NULL, "I have done that?' she thought. 'I must go and live in that poky little house, and have next to no.", '1', '40', '2011-06-15 02:51:20', '2019-05-06 05:57:45'),
('63', '13', NULL, '84',NULL, "Father William,' the young man said, 'And your hair has become very white; And yet I don't take.", '1', '54', '1972-03-07 08:42:34', '1998-02-10 01:42:59'),
('64', '5', NULL, '33',NULL, 'Will you, won\'t you join the dance? Will you, won\'t you, will you join the dance?"\' \'Thank you,.', '1', '70', '1976-07-31 03:32:25', '1987-12-20 23:40:12'),
('65', '9', NULL, '97',NULL, "Alice indignantly. 'Ah! then yours wasn't a bit afraid of them!' 'And who is to find my way into.", '1', '39', '2003-05-30 18:59:17', '2012-02-18 18:40:35'),
('66', '7', NULL, '7',NULL, "No, no! You're a serpent; and there's no name signed at the window, and one foot up the fan and.", '1', '42', '1977-06-27 05:51:17', '1972-05-06 22:43:59'),
('67', '20', NULL, '69',NULL, 'Pigeon, raising its voice to a mouse, That he met in the chimney close above her: then, saying to.', '1', '51', '2016-01-14 19:39:50', '1990-02-03 06:30:20'),
('68', '10', NULL, '95',NULL, "Gryphon. 'It all came different!' Alice replied very readily: 'but that's because it stays the.", '1', '71', '1971-03-05 12:56:15', '1971-04-03 13:02:34'),
('69', '17', NULL, '6',NULL, "I'll eat it,' said Alice, quite forgetting that she did not quite know what you mean,' the March.", '1', '96', '2015-02-11 13:27:33', '1990-02-11 08:46:24'),
('70', '16', NULL, '2',NULL, 'Gryphon, before Alice could see her after the rest of the birds and animals that had slipped in.', '1', '43', '2000-08-16 03:42:16', '2015-06-29 13:02:06'),
('71', '18', NULL, '29',NULL, "EVEN finish, if he had taken his watch out of sight, he said in an offended tone, 'so I can't be.", '1', '18', '1992-04-30 12:13:19', '2008-05-20 22:03:38'),
('72', '7', NULL, '7',NULL, 'King said to Alice, and looking at them with one finger for the moment she felt that there ought!.', '1', '79', '2010-08-29 02:02:26', '2018-04-25 21:20:17'),
('73', '18', NULL, '29',NULL, "Alice alone with the Lory, who at last it unfolded its arms, took the regular course.' 'What was.", '1', '19', '1973-12-27 12:10:12', '1980-02-26 13:24:36'),
('74', '16', NULL, '2',NULL, "Queen, who was reading the list of the jurors were writing down 'stupid things!' on their faces,.", '1', '41', '1993-10-31 22:50:15', '1994-09-20 02:19:19'),
('75', '8', NULL, '64',NULL, 'Lizard, who seemed too much frightened that she began shrinking directly. As soon as she could,.', '1', '69', '1982-04-17 17:01:40', '1986-10-12 01:03:47'),
('76', '3', NULL, '65',NULL, "Alice thought decidedly uncivil. 'But perhaps he can't help it,' said the Hatter. This piece of.", '1', '68', '1980-08-05 20:41:23', '1993-09-15 09:17:50'),
('77', '1', NULL, '17',NULL, 'Alice, who was talking. Alice could see, when she noticed that they had been anything near the.', '1', '74', '2005-12-02 13:13:51', '1983-03-15 02:05:09'),
('78', '4', NULL, '98',NULL, "She stretched herself up and said, 'That's right, Five! Always lay the blame on others!' 'YOU'D.", '1', '19', '2010-09-08 22:15:52', '2019-04-14 14:15:24'),
('79', '12', NULL, '57',NULL, "Hatter: 'I'm on the back. At last the Mock Turtle to the table, half hoping she might find another.", '1', '31', '2005-01-13 12:12:08', '1976-04-14 13:11:50'),
('80', '13', NULL, '84',NULL, "King, 'that only makes the world am I? Ah, THAT'S the great hall, with the other: the Duchess said.", '1', '1', '1988-02-07 16:05:09', '2009-06-04 16:43:57'),
('81',NULL,'7','38',NULL,'Rabbit say, \'A barrowful will do, to begin lessons: you\'d only have to ask help of any that do,\'.','1','8','1978-06-16 04:25:26','2017-07-04 15:29:40'),
('82',NULL,'33','71',NULL,'I can reach the key; and if it makes me grow large again, for she had never heard of uglifying!\'.','1','5','1972-08-06 13:20:08','1994-03-10 03:57:19'),
('83',NULL,'29','30',NULL,'So she swallowed one of these cakes,\' she thought, and looked at Alice. \'It must be getting home;.','1','93','1993-12-23 13:18:32','2004-09-09 11:43:57'),
('84',NULL,'32','50',NULL,'Alice. \'Exactly so,\' said the cook. \'Treacle,\' said a timid voice at her as she could not help.','1','58','2019-09-14 10:50:22','2007-08-01 19:04:09'),
('85',NULL,'27','20',NULL,'Pigeon, but in a very difficult game indeed. The players all played at once without waiting for.','1','53','2008-12-06 19:53:33','1999-07-21 22:32:10'),
('86',NULL,'32','50',NULL,'She stretched herself up on to the Gryphon. Alice did not notice this question, but hurriedly went.','1','27','1980-06-05 17:11:55','2018-06-24 06:58:23'),
('87',NULL,'17','93',NULL,'I know!\' exclaimed Alice, who felt very lonely and low-spirited. In a little shaking among the.','1','95','2019-09-09 14:49:05','1985-05-11 19:58:50'),
('88',NULL,'28','8',NULL,'Hatter instead!\' CHAPTER VII. A Mad Tea-Party There was a large pigeon had flown into her eyes;.','1','34','1975-11-19 12:05:01','1992-07-24 09:48:05'),
('89',NULL,'25','64',NULL,'WOULD go with the glass table and the choking of the leaves: \'I should like it put more.','1','61','1976-10-04 15:00:04','1980-04-03 02:48:06'),
('90',NULL,'26','3',NULL,'It\'s enough to look for her, and the little golden key, and when she went to school in the lock,.','1','53','2001-04-27 16:44:04','2013-01-20 13:48:27'),
('91',NULL,'22','46',NULL,'Drawling--the Drawling-master was an uncomfortably sharp chin. However, she did not get dry again:.','1','15','2017-08-02 17:25:18','2013-11-01 07:38:42'),
('92',NULL,'13','77',NULL,'There was not going to do anything but sit with its arms and legs in all directions, tumbling up.','1','26','2001-02-19 11:30:59','1992-04-28 13:28:15'),
('93',NULL,'44','38',NULL,'Soup! Beau--ootiful Soo--oop! Beau--ootiful Soo--oop! Soo--oop of the Mock Turtle in a solemn.','1','24','1976-07-31 12:16:20','1998-07-05 12:44:05'),
('94',NULL,'8','49',NULL,'Alice as he came, \'Oh! the Duchess, it had gone. \'Well! I\'ve often seen them at dinn--\' she.','1','76','2014-09-07 00:49:18','1998-11-10 06:01:20'),
('95',NULL,'36','86',NULL,'Beautiful, beautiful Soup!\' CHAPTER XI. Who Stole the Tarts? The King looked anxiously at the.','1','27','2018-02-04 21:09:05','2002-04-11 13:32:18'),
('96',NULL,'41','99',NULL,'With gently smiling jaws!\' \'I\'m sure those are not attending!\' said the Hatter said, tossing his.','1','78','1979-09-01 20:40:25','1994-07-08 04:22:08'),
('97',NULL,'5','51',NULL,'Dormouse crossed the court, by the end of your nose-- What made you so awfully clever?\' \'I have.','1','36','1979-04-22 23:49:05','1972-06-03 23:29:05'),
('98',NULL,'36','86',NULL,'Alice, \'it\'ll never do to come before that!\' \'Call the next witness would be worth the trouble of.','0','78','1997-01-01 04:41:43','2006-10-22 13:17:10'),
('99',NULL,'10','6',NULL,'Alice was just saying to herself \'It\'s the first sentence in her life before, and she put her hand.','1','10','1998-05-25 02:56:17','1993-08-10 00:11:03'),
('100',NULL,'29','73',NULL,'Alice; \'but a grin without a great hurry; \'and their names were Elsie, Lacie, and Tillie; and they.','1','53','1977-02-07 06:41:06','2004-06-15 01:52:53'); 


/* for educational purposes only

in groups and channels:
total_participants INT UNSIGNED NOT NULL DEFAULT 1
total_subscribers INT UNSIGNED NOT NULL DEFAULT 1

CREATE TRIGGER channels_subscribers_increaser AFTER INSERT ON channels_users 
  FOR EACH ROW
    UPDATE channels SET total_subscribers = total_subscribers + 1 WHERE id = NEW.channel_id;

CREATE TRIGGER groups_total_participants_increaser AFTER INSERT ON groups_users 
  FOR EACH ROW
    UPDATE groups SET total_participants = total_participants + 1 WHERE id = NEW.group_id;

CREATE TRIGGER channels_subscribers_decreaser AFTER DELETE ON channels_users 
  FOR EACH ROW
    UPDATE channels SET total_subscribers = total_subscribers - 1 WHERE id = OLD.channel_id;

CREATE TRIGGER groups_total_participants_decreaser AFTER DELETE ON groups_users 
  FOR EACH ROW
    UPDATE groups SET total_participants = total_participants - 1 WHERE id = OLD.group_id;
*/ 
